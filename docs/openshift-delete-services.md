---
id: openshift-delete-services
title: Delete an application
---

[![OpenShift](/dsri-documentation/img/openshift-logo.png)](https://www.openshift.com/)

It is recommend to use the `oc` tool to delete an application, as it will allow to properly delete all objects related to the application deployment.

Make sure you are connected to the right project:

```shell
oc project my-project
```

## Stop an application

When you are not using your application anymore you can stop the pod. If you are using a Dynamic or Persistent storage you can restart the pod and continue working with all your data in the same state as you left it.

> ⚠️ Please think of stopping applications you are not using to avoid consuming unnecessary resources.

On the **Overview** page click on the down arrow ⬇️ next to the number of pods deployed.

<img src="/dsri-documentation/img/screenshot_scaledown_pod.png" alt="Scale down pod" style="max-width: 100%; max-height: 100%;" />

You can then restart the pod by clicking the up arrow ⬆️

## Delete an application

Use a selector to easily delete all objects generated by an application deployment. 2 selectors can easily be found in the template configuration:

* `app` : the name you gave when creating your application
* `template` : the name of the template you used to create the application. Use it only if you want to delete all applications created by a specific template.

### Delete an application

The best way to make sure all objects related to your application have been deleted is to use the command line providing your application name:

```shell
oc delete all,secret,configmaps,serviceaccount,rolebinding --selector app=my-application
```

> Delete storage if necessary from the OpenShift web UI.

### Force deletion

If the objects are not deleting properly you can force their deletion:

```shell
oc delete all,secret,configmaps,serviceaccount,rolebinding --force --grace-period=0 --selector app=my-application
```

### Delete persistent storage

To delete a persistent storage dynamically created:

```bash
oc delete pvc storage-name
```

---

## Delete pod

Get the ID of the specific pod you want to delete:

```shell
oc get pod
```

Use the pod ID retrieved to delete the pod:

```shell
oc delete pod <pod_id>
```

Force deletion:

```shell
oc delete pod --force --grace-period=0 <pod_id>
```

---

## Fix stuck deletions

### Stuck provisioned service

If a provisioned service is stuck on `Marked for deletion` you might need to set finalizers to null in the YAML.

This can be done using the OpenShift web UI:

* Go to the **Provisionned Service** in the OpenShift UI overview

* Click on **Edit YAML**

* Remove the **finalizers**:

  ```yaml
    finalizers:
      - kubernetes-incubator/service-catalog
  ```

You can also do it using the `oc` CLI:

```shell
oc get serviceinstance
oc edit serviceinstance <service_instance_id>

# Delete the following lines in metadata:
finalizers: null 	# add null
  - kubernetes-incubator/service-catalog   # Delete this line
```

> The OpenShift Catalog does not handle deploying templates globally (on all projects). If a template is deployed globally, OpenShift will try to create unnecessary objects such as provisioned service (aka. **ServiceInstance**), or ClusterClasses. Those services are not used, and some of them cannot be deleted easily. 
>
> At the moment it is much more reliable to create the template in each project.

You can also do it through the 

* Go to the **Provisionned Service** in the OpenShift UI overview

* Click on **Edit YAML**

* Remove the **finalizers**:

  ```yaml
    finalizers:
      - kubernetes-incubator/service-catalog
  ```

### Delete stuck project

Project can get stuck as marked for deletion. Usually due to Objects still present in the project that are not terminated or `finalizers` left in the some objects YAML file.

> The following commands will allow you to clean up all the projects stuck in terminating state you have access to 

Force deletion of terminating projects:

```bash
for i in $(oc get projects  | grep Terminating| awk '{print $1}'); do echo $i; oc delete project --force --grace-period=0 $i ; done
```

Delete all objects in terminating projects:

```bash
for i in $(oc get projects  | grep Terminating| awk '{print $1}'); do echo $i; oc delete all,configmap,pvc,serviceaccount,rolebinding,secret,serviceinstance --force --grace-period=0 --all -n $i ; done
```

Remove Kubernetes finalizers from terminating projects:

```bash
for i in $(oc get projects  | grep Terminating| awk '{print $1}'); do echo $i; oc get project $i -o yaml | sed "/kubernetes/d" | sed "/finalizers:/d" | oc apply -f - ; done
```

If ServiceInstances refuses to get deleted, try to remove kubernetes finalizers:

```shell
for i in $(oc get projects  | grep Terminating| awk '{print $1}'); do echo $i; oc get serviceinstance -n $i -o yaml | sed "/kubernetes-incubator/d"| oc apply -f - ; done
```

Check if there are still objects in a project:

```bash
oc get all,configmap,pvc,serviceaccount,secret,rolebinding,serviceinstance
```

