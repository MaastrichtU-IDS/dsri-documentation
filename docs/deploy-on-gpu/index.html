<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Data Science Research Infrastructure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Data Science Research Infrastructure Atom Feed">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:200,300,400,400i,500,600,700">
<link rel="stylesheet" href="/css/code-blocks-buttons.css">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
<script src="/js/code-blocks-buttons.js"></script><title data-rh="true">GPU applications | Data Science Research Infrastructure</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://dsri.maastrichtuniversity.nl//img/undraw_online.svg"><meta data-rh="true" name="twitter:image" content="https://dsri.maastrichtuniversity.nl//img/undraw_online.svg"><meta data-rh="true" property="og:url" content="https://dsri.maastrichtuniversity.nl//docs/deploy-on-gpu"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="GPU applications | Data Science Research Infrastructure"><meta data-rh="true" name="description" content="By default you do not have the permission to run applications on GPU, they need to be booked."><meta data-rh="true" property="og:description" content="By default you do not have the permission to run applications on GPU, they need to be booked."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://dsri.maastrichtuniversity.nl//docs/deploy-on-gpu"><link data-rh="true" rel="alternate" href="https://dsri.maastrichtuniversity.nl//docs/deploy-on-gpu" hreflang="en"><link data-rh="true" rel="alternate" href="https://dsri.maastrichtuniversity.nl//docs/deploy-on-gpu" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8553affc.css">
<link rel="preload" href="/assets/js/runtime~main.c76bb1f2.js" as="script">
<link rel="preload" href="/assets/js/main.7dc234ef.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.ico" alt="Data Science Research Infrastructure" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/favicon.ico" alt="Data Science Research Infrastructure" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Data Science Research Infrastructure</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/training">Training</a><a class="navbar__item navbar__link" href="/help">Help</a><a class="navbar__item navbar__link" href="/acknowledgement">Acknowledgement</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/MaastrichtU-IDS/dsri-documentation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/">Get started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/deploy-on-gpu">Deploy applications</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/deploy-on-gpu">GPU applications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide-dockerfile-to-openshift">Deploy from a Dockerfile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy-from-docker">Deploy from a Docker image</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/anatomy-of-an-application">Anatomy of a DSRI application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/helm">Install from Helm charts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operators">Install from Operators</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/deploy-jupyter">Data Science catalog</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy-jupyter">Jupyter Notebooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy-rstudio">RStudio</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy-vscode">VisualStudio Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy-database">Databases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy-matlab">Matlab</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/jupyterhub-spark">JupyterHub with Spark cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy-spark">Spark cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/mpi-jobs">Run MPI jobs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/neuroscience">Neuroscience research</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/catalog-genomics">Genomics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/catalog-imaging">Imaging softwares</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/catalog-utilities">Utilities</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/guide-vpn">Guides</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_cwdi"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_xORG"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">🏠</a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Deploy applications</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/deploy-on-gpu">GPU applications</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>GPU applications</h1></header><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Book a GPU</h5></div><div class="admonition-content"><p><strong>By default you do not have the permission to run applications on GPU</strong>, they need to be booked.</p><p>You can check the availability of our GPUs, and reserve GPU slots in our <a href="/gpu-booking">GPU booking calendar 📅</a></p></div></div><p>We are using images provided by Nvidia, and optimized for GPU. We currently deployed Tensorflow and PyTorch with JupyterLab and VSCode, but any image available in the Nvidia catalog should be easy to deploy: <a href="https://ngc.nvidia.com/catalog/containers" target="_blank" rel="noopener noreferrer">https://ngc.nvidia.com/catalog/containers</a></p><p>Checkout <a href="https://github.com/MaastrichtU-IDS/jupyterlab#jupyterlab-on-gpu" target="_blank" rel="noopener noreferrer">this documentation</a> for more details on how we build the optimized docker images for the DSRI GPUs. Feel free to <a href="https://github.com/MaastrichtU-IDS/jupyterlab#extend-an-image" target="_blank" rel="noopener noreferrer">extend the images</a> to your needs.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="prepare-your-gpu-workspace">Prepare your GPU workspace<a class="hash-link" href="#prepare-your-gpu-workspace" title="Direct link to heading">​</a></h2><p>Start a workspace in your DSRI project with all drivers and dependencies for accessing the GPUs already installed. The workspace is based on Ubuntu, and you will be able to access it using the JupyterLab web UI and VisualStudio Code in the browser.</p><p>You can deploy your GPU workspace from the catalog:</p><ol><li>Go to the <a href="https://console-openshift-console.apps.dsri2.unimaas.nl/catalog" target="_blank" rel="noopener noreferrer">Catalog web UI</a>: <strong>Add to Project</strong> &gt; <strong>Browse Catalog</strong></li><li>Filter the catalog for  &quot;GPU&quot;</li><li>Choose one of the available templates: <strong>JupyterLab on GPU</strong>.</li><li><strong>Follow the instructions</strong> to create the template in the DSRI web UI, all informations about the images you can use are provided there. The most notable is the base image you want to use for your workspace (<code>cuda</code>, <code>tensorflow</code> or <code>pytorch</code>)</li></ol><p>Access the workspace from the route created (the small arrow at the top right of your application bubble in the Topology page).</p><p>You can now add your code and data in the persistent folder to be fully prepared when you will get access to the GPUs.</p><p>You can find more details on the images we use and how to extend them in this repository: <a href="https://github.com/MaastrichtU-IDS/jupyterlab#jupyterlab-on-gpu" target="_blank" rel="noopener noreferrer">https://github.com/MaastrichtU-IDS/jupyterlab#jupyterlab-on-gpu</a></p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Storage</h5></div><div class="admonition-content"><p>Use the <strong><code>/workspace/persistent</code> folder</strong>, which is the JupyterLab workspace, to store your code and data persistently. Note that loading data from the persistent storage will be slowly that what you might expected, this is due to the nature of the distributed storage. So try to optimize this part and avoid reloading multiple time your data, and let us know if it is too much of a problem, we have some solution to improve this</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="enable-gpu-in-your-workspace">Enable GPU in your workspace<a class="hash-link" href="#enable-gpu-in-your-workspace" title="Direct link to heading">​</a></h2><p>Once the GPU quotas has been granted to your project, you will receive a message on Slack, or email when it is done. You can then update your deployment to use the GPUs using this command (our deployment name is <code>jupyterlab-gpu</code> in those 2 examples, change it to yours)</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">oc patch dc/jupyterlab-gpu --type</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">json -p</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;[{&quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/spec/template/spec/containers/0/resources&quot;, &quot;value&quot;: {&quot;requests&quot;: {&quot;nvidia.com/gpu&quot;: 1}, &quot;limits&quot;: {&quot;nvidia.com/gpu&quot;: 1}}}]&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You can use the following command in the terminal of your container on the DSRI to see your current GPU usage:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">nvidia-smi</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Later you can remove the GPU from your app (the pod will be restarted automatically):</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">oc patch dc/jupyterlab-gpu --type</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">json -p</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;[{&quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/spec/template/spec/containers/0/resources&quot;, &quot;value&quot;: {}]&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="tensorboard-logs-visualization">TensorBoard logs visualization<a class="hash-link" href="#tensorboard-logs-visualization" title="Direct link to heading">​</a></h3><p>When using Tensorflow, you can use <a href="https://www.tensorflow.org/tensorboard" target="_blank" rel="noopener noreferrer"><strong>TensorBoard 📈</strong></a> to explore your machine learning runs. It should be already pre-installed in our JupyterLab for GPU templates.</p><p>Follow the usual process to run tensorboard: <a href="https://www.tensorflow.org/tensorboard/get_started" target="_blank" rel="noopener noreferrer">https://www.tensorflow.org/tensorboard/get_started</a></p><ol><li><p>Add the tensorboard callback to your <code>model.fit()</code> function</p></li><li><p>Then start Tensorboard in the terminal with <code>tensorboard --logdir logs</code> (change the directory depending on where the logs of your runs are stored), it should tell you that tensorboard as been started on port 6006</p></li><li><p>Open the Tensorboard view from the JupyterLab welcome page</p></li></ol><h3 class="anchor anchorWithStickyNavbar_mojV" id="increase-the-number-of-gpus-in-your-workspace">Increase the number of GPUs in your workspace<a class="hash-link" href="#increase-the-number-of-gpus-in-your-workspace" title="Direct link to heading">​</a></h3><p>If you already have a application running using 1 GPU, and you have been granted a 2nd GPU to speed up your experiment you can easily upgrade the number of GPU used by your application:</p><p>From the <strong>Topology</strong> view click on your application:</p><ol><li>Stop the application, by decreasing the number of pod to 0 (in the <strong>Details</strong> tab)</li><li>Click on <strong>Options</strong> &gt; <strong>Edit Deployment</strong> &gt; in the YAML of the deployment search for <code>limits</code> and change the number of GPU assigned to your deployment to 2:</li></ol><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">limits</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;2&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;2&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You can also do it using the command line, make sure to stop the pod first, and replace <code>jupyterlab-gpu</code> by your app name in this command:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">oc patch dc/jupyterlab-gpu --type</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">json -p</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;[{&quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/spec/template/spec/containers/0/resources&quot;, &quot;value&quot;: {&quot;requests&quot;: {&quot;nvidia.com/gpu&quot;: 2}, &quot;limits&quot;: {&quot;nvidia.com/gpu&quot;: 2}}}]&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ol start="3"><li>Restart the pod for your application (the same way you stopped it)</li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="install-gpu-drivers-in-any-image">Install GPU drivers in any image<a class="hash-link" href="#install-gpu-drivers-in-any-image" title="Direct link to heading">​</a></h2><p>See the latest official <a href="https://nvidia.github.io/nvidia-container-runtime" target="_blank" rel="noopener noreferrer">Nvidia docs</a> to install the <code>nvidia-container-runtime</code> (all packages and drivers required to access the GPU from your application)</p><p>Here is an example of commands to add to a debian based <code>Dockerfile</code> to install the GPU drivers:</p><div class="codeBlockContainer_I0IT language-dockerfile theme-code-block"><div class="codeBlockContent_wNvx dockerfile"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">RUN curl -s -L https://nvidia.github.io/nvidia-container-runtime/gpgkey | \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    apt-key add - \ &amp;&amp;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    distribution=$(. /etc/os-release;echo $ID$VERSION_ID) \ &amp;&amp;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    curl -s -L https://nvidia.github.io/nvidia-container-runtime/$distribution/nvidia-container-runtime.list | </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RUN apt-get update \ &amp;&amp;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    apt-get install -y nvidia-container-runtime</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Then, build your image in your DSRI project using <code>oc</code> from the folder where your put the <code>Dockerfile</code> (replace <code>custom-app-gpu</code> by your app name):</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">oc new-build --name custom-app-gpu --binary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">oc start-build custom-app-gpu --from-dir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">. --follow --wait</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">oc new-app custom-app-gpu</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You will then need to edit the deployment to add the GPU NodeSelector, the <code>serviceAccountName: anyuid</code> and add a persistent storage</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">oc edit custom-app-gpu</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>See also: official <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#debian-installation" target="_blank" rel="noopener noreferrer">Nvidia docs for CUDA</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/MaastrichtU-IDS/dsri-documentation/edit/master/website/docs/deploy-on-gpu.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-05-25T15:47:22.000Z">5/25/2022</time></b> by <b>Vincent Emonet</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/guide-monitoring"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Monitor your applications</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/guide-dockerfile-to-openshift"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deploy from a Dockerfile</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prepare-your-gpu-workspace" class="table-of-contents__link toc-highlight">Prepare your GPU workspace</a></li><li><a href="#enable-gpu-in-your-workspace" class="table-of-contents__link toc-highlight">Enable GPU in your workspace</a><ul><li><a href="#tensorboard-logs-visualization" class="table-of-contents__link toc-highlight">TensorBoard logs visualization</a></li><li><a href="#increase-the-number-of-gpus-in-your-workspace" class="table-of-contents__link toc-highlight">Increase the number of GPUs in your workspace</a></li></ul></li><li><a href="#install-gpu-drivers-in-any-image" class="table-of-contents__link toc-highlight">Install GPU drivers in any image</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div><a href="https://creativecommons.org/licenses/by/4.0/" title="Creative Commons Attribution 4.0 International license" target="_blank" rel="noopener noreferrer"><img src="/img/cc-by.svg" alt="cc by license"></a></div><div style="margin-bottom:10px">Copyright © 2021 <a href="https://maastrichtuniversity.nl/ids" target="_blank" rel="noopener noreferrer">Institute of Data Science</a> at Maastricht University</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c76bb1f2.js"></script>
<script src="/assets/js/main.7dc234ef.js"></script>
</body>
</html>