<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.69">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-172146359-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-172146359-1",{})</script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:200,300,400,400i,500,600,700">
<link rel="stylesheet" href="/dsri-documentation/css/code-blocks-buttons.css">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
<script src="/dsri-documentation/js/code-blocks-buttons.js"></script><title data-react-helmet="true">Install local OpenShift | Data Science Research Infrastructure</title><meta data-react-helmet="true" property="og:image" content="https://maastrichtu-ids.github.io//dsri-documentation/img/undraw_online.svg"><meta data-react-helmet="true" property="twitter:image" content="https://maastrichtu-ids.github.io//dsri-documentation/img/undraw_online.svg"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Data Science Research Infrastructure"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Install local OpenShift | Data Science Research Infrastructure"><meta data-react-helmet="true" name="description" content="OpenShift and Kubernetes can be installed locally on a single machine for test purpose. The installation requires knowledge of your OS administration, and can be quite complex. We recommend to install it locally only if really required. Otherwise we recommend you to simply use Docker to test images, then deploy them on the DSRI."><meta data-react-helmet="true" property="og:description" content="OpenShift and Kubernetes can be installed locally on a single machine for test purpose. The installation requires knowledge of your OS administration, and can be quite complex. We recommend to install it locally only if really required. Otherwise we recommend you to simply use Docker to test images, then deploy them on the DSRI."><meta data-react-helmet="true" property="og:url" content="https://maastrichtu-ids.github.io//dsri-documentation/docs/guide-local-install"><link data-react-helmet="true" rel="shortcut icon" href="/dsri-documentation/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://maastrichtu-ids.github.io//dsri-documentation/docs/guide-local-install"><link rel="stylesheet" href="/dsri-documentation/styles.e77002cb.css">
<link rel="preload" href="/dsri-documentation/styles.764dbefb.js" as="script">
<link rel="preload" href="/dsri-documentation/runtime~main.3e2e9bdc.js" as="script">
<link rel="preload" href="/dsri-documentation/main.0ba6f800.js" as="script">
<link rel="preload" href="/dsri-documentation/1.84bcabf7.js" as="script">
<link rel="preload" href="/dsri-documentation/1f391b9e.9840e509.js" as="script">
<link rel="preload" href="/dsri-documentation/95.26cca961.js" as="script">
<link rel="preload" href="/dsri-documentation/935f2afb.dc0c322e.js" as="script">
<link rel="preload" href="/dsri-documentation/94.a2e0a0fe.js" as="script">
<link rel="preload" href="/dsri-documentation/b258fc9c.bcda64ba.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/dsri-documentation/"><img src="/dsri-documentation/img/favicon.ico" alt="Data Science Research Infrastructure" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/dsri-documentation/img/favicon.ico" alt="Data Science Research Infrastructure" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Data Science Research Infrastructure</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/dsri-documentation/docs/">Documentation</a><a class="navbar__item navbar__link" href="/dsri-documentation/help">Help</a><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" href="/dsri-documentation/contributing">Contribute</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/MaastrichtU-IDS/dsri-documentation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search searchBarContainer_1-U_"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_18Th searchBarLoadingRing_zYFK"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/dsri-documentation/"><img src="/dsri-documentation/img/favicon.ico" alt="Data Science Research Infrastructure" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/dsri-documentation/img/favicon.ico" alt="Data Science Research Infrastructure" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Data Science Research Infrastructure</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/dsri-documentation/docs/">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/dsri-documentation/help">Help</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link" href="/dsri-documentation/contributing">Contribute</a></li><li class="menu__list-item"><a href="https://github.com/MaastrichtU-IDS/dsri-documentation" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Install local OpenShift</h1></header><div class="markdown"><p>OpenShift and Kubernetes can be installed locally on a single machine for test purpose. The installation requires knowledge of your OS administration, and can be quite complex. We recommend to install it locally only if really required. Otherwise we recommend you to simply use Docker to test images, then deploy them on the DSRI.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-minishift"></a>Install MiniShift<a class="hash-link" href="#install-minishift" title="Direct link to heading">#</a></h2><p><a href="https://docs.okd.io/latest/minishift/getting-started/installing.html" target="_blank" rel="noopener noreferrer"></a></p><p>You will need to <a href="https://docs.okd.io/latest/minishift/getting-started/setting-up-virtualization-environment.html" target="_blank" rel="noopener noreferrer">set up the virtualization environment</a> before <a href="https://docs.okd.io/latest/minishift/getting-started/installing.html" target="_blank" rel="noopener noreferrer">installing MiniShift</a>.</p><p>Download <a href="https://github.com/minishift/minishift/releases" target="_blank" rel="noopener noreferrer">MiniShift</a> and unzip it.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># For Ubuntu 18.04 and older</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -y libvirt-bin qemu-kvm</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># For Ubuntu 18.10 and newer (replace libvirtd by libvirt in next commands)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -y qemu-kvm libvirt-daemon libvirt-daemon-system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Create group if does not exist</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> addgroup libvirtd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> adduser </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable function" style="color:rgb(130, 170, 255)">whoami</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"> libvirtd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">usermod</span><span class="token plain"> -a -G libvirtd </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable function" style="color:rgb(130, 170, 255)">whoami</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">newgrp libvirtd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -L https://github.com/dhiltgen/docker-machine-kvm/releases/download/v0.10.0/docker-machine-driver-kvm-ubuntu16.04 -o /usr/local/bin/docker-machine-driver-kvm</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> +x /usr/local/bin/docker-machine-driver-kvm</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Check if libvirtd running</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl is-active libvirtd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start if inactive</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> systemctl start libvirtd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Copy MiniShift in your path</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> minishift-1.34.1-linux-amd64/minishift /usr/local/bin</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="start-minishift"></a>Start MiniShift<a class="hash-link" href="#start-minishift" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">minishift start</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><blockquote><p>Get your local OpenShift cluster URL after the command complete.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="login"></a>Login<a class="hash-link" href="#login" title="Direct link to heading">#</a></h3><p>Go to your local cluster URL.</p><blockquote><p>E.g. <a href="https://192.168.42.58:8443/console/catalog" target="_blank" rel="noopener noreferrer">https://192.168.42.58:8443/console/catalog</a>.</p></blockquote><blockquote><p>Username: <code>admin</code> or <code>developer</code></p><p>Password: anything will work</p></blockquote><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># As admin</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">oc login -u system:admin</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="stop"></a>Stop<a class="hash-link" href="#stop" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">minishift stop</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="reset"></a>Reset<a class="hash-link" href="#reset" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">minishift delete -f</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-kubectl"></a>Install kubectl<a class="hash-link" href="#install-kubectl" title="Direct link to heading">#</a></h2><p><a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer"><img alt="Kubernetes" src="/dsri-documentation/assets/images/Kubernetes-c5f36b415dd16a8fcdae01fbc8d9c940.png"></a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="kubectl-on-ubuntu"></a>kubectl on Ubuntu<a class="hash-link" href="#kubectl-on-ubuntu" title="Direct link to heading">#</a></h3><p>For more details: read the official <a href="https://tutorials.ubuntu.com/tutorial/install-a-local-kubernetes-with-microk8s#0" target="_blank" rel="noopener noreferrer">install Kubernetes on Ubuntu tutorial</a> or see the official <a href="https://ubuntu.com/kubernetes/install" target="_blank" rel="noopener noreferrer">Ubuntu Kubernetes install documentation</a>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> snap </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> microk8s --classic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">usermod</span><span class="token plain"> -a -G microk8s </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$USER</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Restart your machine</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> -p ~/.kube</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">microk8s.kubectl config view --raw </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token plain">/.kube/config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Make sure this works for dashboard on Ubuntu</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">microk8s.enable dashboard dns</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><blockquote><p>To do only if kubectl is not already installed on your machine:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> snap </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">alias</span><span class="token plain"> microk8s.kubectl kubectl</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="kubectl-on-macos--windows"></a>kubectl on MacOS &amp; Windows<a class="hash-link" href="#kubectl-on-macos--windows" title="Direct link to heading">#</a></h3><p>Included in Docker installation. Use the installer provided by DockerHub.</p><blockquote><p>Activate it in Docker Preferences &gt; Kubernetes.</p></blockquote><p>For Windows you will need to download the <code>kubectl.exe</code> and place it in your PATH.</p><ul><li><a href="https://storage.googleapis.com/kubernetes-release/release/v1.17.0/bin/windows/amd64/kubectl.exe" target="_blank" rel="noopener noreferrer">https://storage.googleapis.com/kubernetes-release/release/v1.17.0/bin/windows/amd64/kubectl.exe</a></li></ul><p>We recommend to create a <code>kubectl</code> directory in <code>C:/</code> and add this <code>C:/kubectl</code> to the Path environment variable in System properties &gt; Advanced &gt; Environment Variables &gt; Path</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-the-dashboard-ui"></a>Install the Dashboard UI<a class="hash-link" href="#install-the-dashboard-ui" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Install Kubernetes UI</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-beta4/aio/deploy/recommended.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/MaastrichtU-IDS/d2s-core/master/argo/roles/kube-dashboard-adminuser-sa.yml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/MaastrichtU-IDS/d2s-core/master/argo/roles/kube-adminuser-rolebinding.yml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Get the Token to access the dashboard</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n kube-system describe secret </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">kubectl -n kube-system get secret </span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable function" style="color:rgb(130, 170, 255)">grep</span><span class="token variable" style="color:rgb(191, 199, 213)"> admin-user </span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable function" style="color:rgb(130, 170, 255)">awk</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable string" style="color:rgb(195, 232, 141)">&#x27;{print </span><span class="token variable string variable" style="color:rgb(191, 199, 213)">$1</span><span class="token variable string" style="color:rgb(195, 232, 141)">}&#x27;</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Windows user will need to execute the 2 commands manually:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n kube-system get secret </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># And get the token containing &#x27;admin-user&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n kube-system describe secret</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># For Windows: give the anonymous user global access</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create clusterrolebinding cluster-system-anonymous --clusterrole</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">admin --user</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">system:anonymous</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Note: this could be improved. I think only the Dashboard UI didn&#x27;t have the required permissions.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Finally, start the web UI, and chose the Token connection</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl proxy</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><blockquote><p>Then visit: http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/</p><p>And provide the previously obtained token.</p></blockquote><p><strong>Warning:</strong> you will need to save the token to login again next time (use the password save from your browser if possible).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="run-kubectl"></a>Run kubectl<a class="hash-link" href="#run-kubectl" title="Direct link to heading">#</a></h3><p><code>kubectl</code> should be running at start.</p><p>Just restart the web UI</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl proxy</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><blockquote><p>Then visit: http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="enable-internet"></a>Enable internet<a class="hash-link" href="#enable-internet" title="Direct link to heading">#</a></h3><p><a href="https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/" target="_blank" rel="noopener noreferrer">Debug DNS on Ubuntu</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">microk8s.enable dns</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><blockquote><p>Restart your machine.</p></blockquote><p>You might need to change your firewall configuration</p><ul><li>On Ubuntu</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> ufw allow </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> on cni0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> ufw allow out on cni0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> ufw default allow routed</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><ul><li>Try to connect to the internet from Kubernetes with the <a href="https://github.com/MaastrichtU-IDS/d2s-core/blob/master/argo/tests/test-busybox.yaml" target="_blank" rel="noopener noreferrer">test-busybox pod</a>.</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">exec</span><span class="token plain"> -ti busybox -- /bin/sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">ping</span><span class="token plain"> google.com</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="create-persistent-volume"></a>Create persistent volume<a class="hash-link" href="#create-persistent-volume" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Create volume</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -n argo -f d2s-core/argo/storage/storage-mac.yaml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><blockquote><p>Not working at the moment.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="uninstall"></a>Uninstall<a class="hash-link" href="#uninstall" title="Direct link to heading">#</a></h3><p>Clean uninstall before 2.2.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get cm workflow-controller-configmap -o yaml -n kube-system --export </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> kubectl apply -n argo -f -</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete -n kube-system cm workflow-controller-configmap</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete -n kube-system deploy workflow-controller argo-ui</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete -n kube-system sa argo argo-ui</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete -n kube-system svc argo-ui</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-argo-workflows"></a>Install Argo workflows<a class="hash-link" href="#install-argo-workflows" title="Direct link to heading">#</a></h2><p><a href="https://argoproj.github.io/argo/" target="_blank" rel="noopener noreferrer"><img alt="Argo project" src="/dsri-documentation/assets/images/argo-logo-c091bfee39aec37120d0e879edac74f6.png"></a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-on-your-local-kubernetes"></a>Install on your local Kubernetes<a class="hash-link" href="#install-on-your-local-kubernetes" title="Direct link to heading">#</a></h3><p>Argo workflows will be installed on the <code>argo</code> namespace. See the <a href="https://argoproj.github.io/docs/argo/demo.html#2-install-the-controller-and-ui" target="_blank" rel="noopener noreferrer">official Argo documentation</a> for more details.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create ns argo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -n argo -f https://raw.githubusercontent.com/argoproj/argo/v2.4.2/manifests/install.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Configure service account to run workflow</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create rolebinding default-admin --clusterrole</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">admin --serviceaccount</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">default:default</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Test run</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">argo submit --watch https://raw.githubusercontent.com/argoproj/argo/master/examples/hello-world.yaml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><blockquote><p>See <a href="https://raw.githubusercontent.com/vemonet/argo/master/manifests/namespace-install.yaml" target="_blank" rel="noopener noreferrer">custom configuration</a> for namespace install.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -n argo -f https://raw.githubusercontent.com/vemonet/argo/master/manifests/namespace-install.yaml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-the-client"></a>Install the client<a class="hash-link" href="#install-the-client" title="Direct link to heading">#</a></h3><p>See the <a href="/dsri-documentation/docs/workflows-argo">Argo workflows documentation</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="expose-the-ui"></a>Expose the UI<a class="hash-link" href="#expose-the-ui" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-shell codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n argo port-forward deployment/argo-ui </span><span class="token number" style="color:rgb(247, 140, 108)">8002</span><span class="token plain">:8001</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><blockquote><p>Access on http://localhost:8002.</p></blockquote></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/MaastrichtU-IDS/dsri-documentation/edit/master/website/docs/guide-local-install.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-02-10T10:02:09.000Z" class="docLastUpdatedAt_217_">2/10/2021</time> by <strong>Binosha</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#install-minishift" class="table-of-contents__link">Install MiniShift</a><ul><li><a href="#start-minishift" class="table-of-contents__link">Start MiniShift</a></li><li><a href="#login" class="table-of-contents__link">Login</a></li><li><a href="#stop" class="table-of-contents__link">Stop</a></li><li><a href="#reset" class="table-of-contents__link">Reset</a></li></ul></li><li><a href="#install-kubectl" class="table-of-contents__link">Install kubectl</a><ul><li><a href="#kubectl-on-ubuntu" class="table-of-contents__link">kubectl on Ubuntu</a></li><li><a href="#kubectl-on-macos--windows" class="table-of-contents__link">kubectl on MacOS &amp; Windows</a></li><li><a href="#install-the-dashboard-ui" class="table-of-contents__link">Install the Dashboard UI</a></li><li><a href="#run-kubectl" class="table-of-contents__link">Run kubectl</a></li><li><a href="#enable-internet" class="table-of-contents__link">Enable internet</a></li><li><a href="#create-persistent-volume" class="table-of-contents__link">Create persistent volume</a></li><li><a href="#uninstall" class="table-of-contents__link">Uninstall</a></li></ul></li><li><a href="#install-argo-workflows" class="table-of-contents__link">Install Argo workflows</a><ul><li><a href="#install-on-your-local-kubernetes" class="table-of-contents__link">Install on your local Kubernetes</a></li><li><a href="#install-the-client" class="table-of-contents__link">Install the client</a></li><li><a href="#expose-the-ui" class="table-of-contents__link">Expose the UI</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div><a rel="noopener noreferrer" href="https://creativecommons.org/licenses/by/4.0/" title="Creative Commons Attribution 4.0 International license" target="_blank"><img src="/dsri-documentation/img/cc-by.svg" alt="cc by license"></a></div><div style="margin-bottom:10px">Copyright Â© 2021 <a href="https://maastrichtuniversity.nl/ids" target="_blank" rel="noopener noreferrer">Institute of Data Science</a> at Maastricht University</div><div style="margin-bottom:10px;color:grey">We track page views and users demographics using Google Analytics to improve our users experience. <a href="https://policies.google.com/technologies/partner-sites">See how Google uses collected informations</a>.<br>You can prevent Google Analytics tracking by enabling <a href="https://blog.mozilla.org/blog/2019/06/04/firefox-now-available-with-enhanced-tracking-protection-by-default/">Firefox Tracking Protection</a>, installing <a href="https://chrome.google.com/webstore/detail/ublock-origin/cjpalhdlnbpafiamejdnhcphjbkeiagm?hl=fr">uBlock Origin add-on</a>, or using the official <a href="https://tools.google.com/dlpage/gaoptout/">Google Analytics Opt-out add-on</a>.</div></div></div></footer></div>
<script src="/dsri-documentation/styles.764dbefb.js"></script>
<script src="/dsri-documentation/runtime~main.3e2e9bdc.js"></script>
<script src="/dsri-documentation/main.0ba6f800.js"></script>
<script src="/dsri-documentation/1.84bcabf7.js"></script>
<script src="/dsri-documentation/1f391b9e.9840e509.js"></script>
<script src="/dsri-documentation/95.26cca961.js"></script>
<script src="/dsri-documentation/935f2afb.dc0c322e.js"></script>
<script src="/dsri-documentation/94.a2e0a0fe.js"></script>
<script src="/dsri-documentation/b258fc9c.bcda64ba.js"></script>
</body>
</html>