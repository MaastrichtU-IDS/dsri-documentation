"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2887],{4177:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var n=r(7294),a=r(6010),o=r(5884),s=r(2263),l=r(9578),i=r(9669),c=r.n(i),u=r(6108),d=r(8082),g=r(913),p=r(6886),m=r(8271),h=r(7357),y=r(8456),f=r(5113),b=r(7349),E=r(2912),v=r(286),k="https://api.dsri.maastrichtuniversity.nl";const x=function(){var e=(0,s.Z)().siteConfig,t=void 0===e?{}:e,r=n.useState({errorMessages:{},formObj:{email:"",project_id:""},errorMessage:"",openSuccess:"none",openError:"none",loading:!1,reservations:{},bookedDays:{},selection1:{startDate:null,endDate:null,key:"selection1"},windowSize:1e3}),i=r[0],x=r[1],w=n.useRef(i),D=n.useCallback((function(e){w.current=Object.assign({},w.current,e),x(w.current)}),[x]);n.useEffect((function(){Z();var e={startDate:new Date,endDate:(0,b.default)(new Date,7),key:"selection1"};D({selection1:e,windowSize:window.innerWidth})}),[]);var j=function(e){return!!(e in i.errorMessages&&i.errorMessages[e]&&i.errorMessages[e].length>0)},M=function(e){return e in i.errorMessages&&i.errorMessages[e]&&i.errorMessages[e].length>0?i.errorMessages[e]:null},S=function(e){if("email"===e.target.id){var t=i.errorMessages;e.target.value.match(/^[a-zA-Z0-9\.-_]+@(?:student.)?maastrichtuniversity.nl$/)?(t.email=null,D({errorMessages:t})):(t.email="Provide your email, must end with @maastrichtuniversity.nl or @student.maastrichtuniversity.nl",D({errorMessages:t}))}if("project_id"===e.target.id){var r=i.errorMessages;e.target.value.match(/^[a-zA-Z0-9-]*$/)?(r.project_id=null,D({errorMessages:r})):(r.project_id="The project ID should only contains alphanumeric characters and -",D({errorMessages:r}))}if(!i.errorMessages[e.target.id]){var n=i.formObj;n[e.target.id]=e.target.value,D({formObj:n})}},Z=function(){c().get(k+"/gpu/booked-days",{headers:{"Content-Type":"application/json"}}).then((function(e){D({bookedDays:e.data})})).catch((function(e){console.log(e)}))};return n.createElement(o.Z,{title:""+t.title,description:"Data Science Research Infrastructure at Maastricht University"},n.createElement(g.Z,{fullWidth:!0,style:{textAlign:"center",marginTop:"30px"}},n.createElement("h1",null,"Book a GPU"),n.createElement("p",{style:{marginTop:"10px"}},"Once you booked a GPU, you will receive an email with more informations, and the GPU will be enabled in your DSRI project for the period requested. You can book a GPU for a maximum of 4 weeks."),n.createElement("p",{style:{marginBottom:"40px"}},"The DSRI has 8 GPUs, the number in the badge on a date indicates the number of GPUs already booked this day, and greyed out days are already fully booked."),n.createElement("form",{onSubmit:function(e){e.preventDefault();D({loading:!0,openError:"none",openSuccess:"none",errorMessage:""});var t={user_email:i.formObj.email,project_id:i.formObj.project_id,starting_date:i.selection1.startDate,ending_date:i.selection1.endDate};c().post(k+"/gpu/request",t,{headers:{"Content-Type":"application/json"}}).then((function(e){e.data.errorMessage?D({openError:"inline",openSuccess:"none",errorMessage:e.data.errorMessage,loading:!1}):D({openSuccess:"inline",openError:"none",loading:!1}),Z()})).catch((function(e){if(D({openSuccess:"none",openError:"inline",loading:!1}),e.response)if(e.response.data.detail){var t=JSON.stringify(e.response.data.detail).replace(/"/g,"").replace(/{/g,"").replace(/}/g,"").replace(/\[/g,"").replace(/\]/g,"").replace(/:/g,"").replace(/,/g,"").replace(/loc/g,"").replace(/body/g,"").replace(/msg/g,": ").replace(/type/g,"").replace(/value_error.missing/g," - ");D({errorMessage:"Error: "+t})}else D({errorMessage:JSON.stringify(e.response.data)});else e.request?(console.log("request err"),console.log(e.request)):(console.log("Error",e.message),D({errorMessage:e.message}))}))}},n.createElement(p.ZP,{container:!0,spacing:2},n.createElement(p.ZP,{item:!0,xs:5,style:{textAlign:"right"}},n.createElement("p",{className:l.Z.required},"Your UM email:")),n.createElement(p.ZP,{item:!0,xs:7,style:{textAlign:"left"}},n.createElement(m.Z,{id:"email",multiline:!0,label:"Email",placeholder:"Email",variant:"outlined",onBlur:S,size:"small",required:!0,error:j("email"),helperText:M("email")?M("email"):"Must end with @maastrichtuniversity.nl or @student.maastrichtuniversity.nl"})),n.createElement(p.ZP,{item:!0,xs:5,style:{textAlign:"right"}},n.createElement("p",{className:l.Z.required},"The DSRI project ID where to enable GPU:")),n.createElement(p.ZP,{item:!0,xs:7,style:{textAlign:"left"}},n.createElement(m.Z,{id:"project_id",multiline:!0,label:"DSRI project ID",placeholder:"e.g. machine-learning-analysis",variant:"outlined",onChange:S,size:"small",required:!0,error:j("project_id"),helperText:M("project_id")?M("project_id"):"The project ID should only contains alphanumeric characters and -"})),i.windowSize>760&&n.createElement(p.ZP,{item:!0,xs:1,style:{textAlign:"center",margin:"20px 0px"}}),n.createElement(p.ZP,{item:!0,xs:i.windowSize<=760?12:10,style:{textAlign:"center",margin:"20px 0px"}},n.createElement(v.C0,{editableDateInputs:!0,ranges:[i.selection1],onChange:function(e){return D(Object.assign({},i,e))},dayContentRenderer:function(e){var t,r,a=function(e){var t=(e.getMonth()+1).toString();1==t.length&&(t="0"+t);var r=e.getDate()+"";1==r.length&&(r="0"+r);var n=e.getFullYear()+"-"+t+"-"+r,a={fullyBooked:!1},o=[];return Object.keys(i.bookedDays).indexOf(n)>-1&&(Object.keys(i.bookedDays[n]).length>1&&Object.keys(i.bookedDays[n]).map((function(e,t){"fullyBooked"!=e&&o.push(e)})),1==i.bookedDays[n].fullyBooked&&(a.fullyBooked=!0)),a.gpus=o,a}(e),o=a.fullyBooked;return n.createElement(n.Fragment,null,o&&n.createElement("div",{style:{cursor:"not-allowed"}},n.createElement("span",{style:{color:"#b0bec5",pointerEvents:"none",cursor:"not-allowed"}},(0,E.default)(e,"d"))),!o&&a.gpus.length>0&&n.createElement(u.Z,{title:"GPUs booked: "+a.gpus.join(", ")},n.createElement(d.Z,{badgeContent:a.gpus.length,color:(t=a.gpus.length,r="success",t>3&&(r="warning"),t>5&&(r="error"),r),style:{right:-3,top:0,padding:"0 4px"}},n.createElement("div",null,n.createElement("span",{style:{fontWeight:"300"}},(0,E.default)(e,"d"))))),!o&&0==a.gpus.length&&n.createElement("div",null,n.createElement("span",{style:{fontWeight:"300"}},(0,E.default)(e,"d"))))},minDate:new Date,showSelectionPreview:!0,moveRangeOnFirstSelection:!1,months:2,weekStartsOn:1,direction:i.windowSize<=760?"vertical":"horizontal",preventSnapRefocus:!0}))),n.createElement(h.Z,{style:{textAlign:"center",marginTop:"10px"}},i.loading&&n.createElement(y.Z,{style:{marginTop:"20px"}}),n.createElement(f.Z,{elevation:4,style:{backgroundColor:"#e57373",padding:"15px"},sx:{display:i.openError}},"\u26a0\ufe0f\xa0\xa0",i.errorMessage),n.createElement(f.Z,{elevation:4,style:{backgroundColor:"#81c784",padding:"15px"},sx:{display:i.openSuccess}},"\u2714\ufe0f\xa0\xa0GPU requested successfully, you will receive an email, or Slack message, with more informations to use the GPU on the DSRI the day your booking starts (if you don't get a message, directly contact Vincent Emonet on Slack).")),n.createElement("button",{type:"submit",style:{margin:"30px 0px"},className:(0,a.Z)("button button--outline button--primary button--lg")},"Request a GPU for the selected period"))))}},9578:(e,t,r)=>{r.d(t,{Z:()=>n});const n={heroBanner:"heroBanner_UJJx",buttons:"buttons_pzbO",features:"features_keug",required:"required_T5nJ"}}}]);