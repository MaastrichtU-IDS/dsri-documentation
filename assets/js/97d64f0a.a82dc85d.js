"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1857],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(a),h=o,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||r;return a?n.createElement(m,i(i({ref:t},c),{},{components:a})):n.createElement(m,i({ref:t},c))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},8064:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>p,toc:()=>u});var n=a(3117),o=a(102),r=(a(7294),a(3905)),i=["components"],s={id:"start-workspace",title:"Start your workspace"},l=void 0,p={unversionedId:"start-workspace",id:"start-workspace",title:"Start your workspace",description:"This page will help you to start a workspace to run your code and experiments on the DSRI in a container.",source:"@site/docs/start-workspace.md",sourceDirName:".",slug:"/start-workspace",permalink:"/docs/start-workspace",draft:!1,editUrl:"https://github.com/MaastrichtU-IDS/dsri-documentation/edit/master/website/docs/start-workspace.md",tags:[],version:"current",lastUpdatedBy:"lwinckers",lastUpdatedAt:1733239107,formattedLastUpdatedAt:"Dec 3, 2024",frontMatter:{id:"start-workspace",title:"Start your workspace"},sidebar:"docs",previous:{title:"Access the DSRI",permalink:"/docs/access-dsri"},next:{title:"Install the client",permalink:"/docs/openshift-install"}},c={},u=[{value:"Introduction to containers",id:"introduction-to-containers",level:2},{value:"Choose your interface",id:"choose-your-interface",level:2},{value:"Start your workspace",id:"start-your-workspace",level:2},{value:"Upload your code and data",id:"upload-your-code-and-data",level:2},{value:"Install your dependencies",id:"install-your-dependencies",level:2},{value:"Run your code",id:"run-your-code",level:2},{value:"Stop your application",id:"stop-your-application",level:2},{value:"Start your application",id:"start-your-application",level:2},{value:"Optional: define a docker image",id:"optional-define-a-docker-image",level:2}],d={toc:u};function h(e){var t=e.components,a=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This page will help you to start a workspace to run your code and experiments on the DSRI in a container. "),(0,r.kt)("h2",{id:"introduction-to-containers"},"Introduction to containers"),(0,r.kt)("p",null,"Anything running in DSRI needs to be running in a docker container. Docker containers are namespaces that share the kernel on a linux system, you can see them as a clean minimalist Linux computers with only what you need to run your programs installed. This allows you to completely control the environment where your code runs, and avoid conflicts."),(0,r.kt)("p",null,"When running experiments we can start from existing images that have been already published for popular data science applications with a web interface. You can use, for example, JupyterLab when running python, RStudio when running R, or VisualStudio Code if you prefer."),(0,r.kt)("p",null,"Once you access a running container, you can install anything you need like if it was a linux/ubuntu computer (most of them runs with admin privileges), and run anything via the notebook/RStudio/VSCode interface, or the terminal."),(0,r.kt)("h2",{id:"choose-your-interface"},"Choose your interface"),(0,r.kt)("p",null,"First step to get your code running on the DSRI is to pick the base interface you want to use to access your workspace on the DSRI."),(0,r.kt)("p",null,"We prepared generic Docker images for data science workspaces with your favorite web UI pre-installed to easily deploy your workspace. So you just need to choose your favorite workspace, start the container, access it, add your code, and install your dependencies."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Login to the DSRI dashboard"),(0,r.kt)("li",{parentName:"ol"},"Select your project, or create one with a meaningful short name representing your project, e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"workspace-yourname")),(0,r.kt)("li",{parentName:"ol"},"Go to the ",(0,r.kt)("strong",{parentName:"li"},"+Add")," page, and select to add ",(0,r.kt)("strong",{parentName:"li"},"From Developer Catalog => All services"))),(0,r.kt)("img",{src:"/img/screenshot_access_catalog_manu17112024.png",alt:"Access catalog",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Search for templates corresponding to the application you want to deploy among the one described below (make sure the filter for templates is properly checked). ")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"JupyterLab"),": Access and run your code using the popular Jupyter notebooks, with kernel for python, java, R, julia. It also provides a good web interface to access the terminal, upload and browse the files."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"VisualStudio Code"),": Your daily IDE, but in your browser, running on the DSRI. "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"RStudio"),": R users favorite's."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"The terminal"),": For people who are used to the terminal and just want to run scripts, it provides smaller and more stable images, which makes installation and deployment easier. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Ubuntu")," template to start a basic ubuntu image and access it from the terminal."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Any web interface"),": You can easily run and access most programs with a web interface on the DSRI. You can use the template ",(0,r.kt)("strong",{parentName:"p"},"Custom workspace")," if your application is exposed on port 8888. Otherwise visit the page ",(0,r.kt)("a",{parentName:"p",href:"/docs/anatomy-of-an-application"},"Anatomy of a DSRI application")," for more details. "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Desktop interface"),": there is the possibility to start a container as a Linux operating system with a graphical desktop interface. It can be useful to deploy software like Matlab, but the setup can be a bit more complex. You will get an Ubuntu computer with a basic Desktop interface, running on the DSRI, that you can access directly in your web browser. The desktop interface is accessed through a web application by using noVNC, which exposes the VNC connection without needing a VNC client."),(0,r.kt)("admonition",{title:"More applications",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You can also find more documentation on the different applications that can be deployed from the DSRI under ",(0,r.kt)("strong",{parentName:"p"},"Deploy applications")," in the menu on the left.")),(0,r.kt)("h2",{id:"start-your-workspace"},"Start your workspace"),(0,r.kt)("p",null,"Once you chose your favorite way to run your experiments, you can click on the application you want to use for your workspace. Checkout the description to learn more details about the application that will be deployed. "),(0,r.kt)("p",null,"Then click on ",(0,r.kt)("strong",{parentName:"p"},"Instantiate Template"),", and fill the parameters, such as the password to access the web UI. Note that the application name needs to be unique in the project. Finally click on the ",(0,r.kt)("strong",{parentName:"p"},"Create")," button."),(0,r.kt)("img",{src:"/img/screenshot_template_configuration.png",alt:"Filter templates catalog",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,r.kt)("p",null,"You should see your application in your project dashboard, it can take a few seconds to a few minutes to pull the docker image and start the application. "),(0,r.kt)("p",null,"Once the application has started you will be able to access it by clicking on its circle, then click the ",(0,r.kt)("strong",{parentName:"p"},"Route"),", that has been automatically generated for the web interface, in the Resources tab."),(0,r.kt)("admonition",{title:"Check the workshop",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"For a more detailed tutorial, you can follow the ",(0,r.kt)("a",{parentName:"p",href:"https://maastrichtu-ids.github.io/dsri-workshop-start-app/"},"workshop to start Data Science applications on the DSRI"))),(0,r.kt)("h2",{id:"upload-your-code-and-data"},"Upload your code and data"),(0,r.kt)("p",null,"We recommend you to use ",(0,r.kt)("inlineCode",{parentName:"p"},"git")," to clone your project code in your workspace, as it helps sharing and managing the evolution of your project. "),(0,r.kt)("p",null,"It will be preinstalled in most images, otherwise you can install it easily with ",(0,r.kt)("inlineCode",{parentName:"p"},"apt-get install git")),(0,r.kt)("p",null,"With web interface like JupyterLab, VisualStudio Code and Rstudio you can easily upload small and medium size files directly through the UI with a drag and drop."),(0,r.kt)("p",null,"Otherwise you can use the terminal, install the ",(0,r.kt)("inlineCode",{parentName:"p"},"oc")," client, and use the ",(0,r.kt)("inlineCode",{parentName:"p"},"oc cp")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"oc rsync")," commands to upload large files to your workspace on the DSRI. See the Upload data page for more details."),(0,r.kt)("h2",{id:"install-your-dependencies"},"Install your dependencies"),(0,r.kt)("p",null,"Once the workspace is started, you can install the different dependencies you need to run your experiments."),(0,r.kt)("p",null,"It is recommended to save all the commands you used to install the different requirements in a script (e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"install.sh"),"). This will insure you can reinstall the environment easily and faithfully if the container is restarted. You can also use them to create a Docker image with everything prepared for your application."),(0,r.kt)("p",null,"Most containers for science are based on debian/ubuntu, so you can install new packages with ",(0,r.kt)("inlineCode",{parentName:"p"},"apt-get"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"apt-get update\napt-get install -y build-essentials wget curl\n")),(0,r.kt)("h2",{id:"run-your-code"},"Run your code"),(0,r.kt)("p",null,"You can use your web interface to run your code as you like to do: notebooks, rstudio, execute via VSCode"),(0,r.kt)("p",null,"Note that for jobs which are running for a long time the web UI is not always the best solution, e.g. Jupyter notebooks can be quite instable when running a 30 min codeblock."),(0,r.kt)("p",null,"A quick solution for that is to run your code in scripts, using the bash terminal. You can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"nohup")," prefix, and ",(0,r.kt)("inlineCode",{parentName:"p"},"&")," suffix to run your script in the background, so that you can even disconnect, and come back later to check the results and logs."),(0,r.kt)("p",null,"For example with a python script, you would do:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"nohup python my_script.py &\n")),(0,r.kt)("p",null,"The script will run in the background, and all terminal output will be stored in the file ",(0,r.kt)("inlineCode",{parentName:"p"},"nohup.out")),(0,r.kt)("p",null,"You can also check if the process is currently running by typing ",(0,r.kt)("inlineCode",{parentName:"p"},"ps aux")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"top")," "),(0,r.kt)("p",null,"You can kill the process by getting the process ID (PID) using the previous commands, and then: ",(0,r.kt)("inlineCode",{parentName:"p"},"kill -9 PID")),(0,r.kt)("h2",{id:"stop-your-application"},"Stop your application"),(0,r.kt)("p",null,"When you are not using your application anymore you can stop the pod. If you are using a Dynamic or Persistent storage you can restart the pod and continue working with all your data in the same state as you left it."),(0,r.kt)("admonition",{title:"Do not waste resources",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Please think of stopping applications you are not using to avoid consuming unnecessary resources.")),(0,r.kt)("p",null,"On the ",(0,r.kt)("strong",{parentName:"p"},"Topology")," page click on the down arrow \u2b07\ufe0f next to the number of pods deployed."),(0,r.kt)("img",{src:"/img/screenshot_scaledown_pod.png",alt:"Scale down pod",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,r.kt)("p",null,"You can then restart the pod by clicking the up arrow \u2b06\ufe0f"),(0,r.kt)("p",null,"Note that starting more than 1 pod will not increase the amount of resources you have access to, most of the time it will only waste resources and might ends up in weird behavior on your side. The web UI will randomly assign you to 1 of the pod started when you access it. This only works for clusters with multiple workers, such as Apache Flink and Spark. Or if you connect directly to each pod with the terminal to run different processes."),(0,r.kt)("h2",{id:"start-your-application"},"Start your application"),(0,r.kt)("p",null,"When you try to access your workspace and you encounter the page below, usually this indicates that your pod is not running. For example, this will be the case if you stopped your pod, or if there was maintenance on the cluster."),(0,r.kt)("img",{src:"/img/screenshot_application_unavailable.png",alt:"Screenshot of page that says Application is not available",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,r.kt)("p",null,"To start the pod, go to the ",(0,r.kt)("strong",{parentName:"p"},"Topology")," page, and click on the up arrow \u2b06\ufe0f next to the number of pods deployed. Make sure you scale it to 1. Scaling it to more than 1 will not increase the amount of resources you have access to, most of the time it will only waste resources and causes weird behavior on your side."),(0,r.kt)("img",{src:"/img/screenshot_scaledown_pod.png",alt:"Scale down pod",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,r.kt)("admonition",{title:"Do not waste resources",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Please only scale up resources you're using, and scale down when you're not using them anymore. Consuming resources consumes unnecessary power and might prevent other users from using the DSRI.")),(0,r.kt)("h2",{id:"optional-define-a-docker-image"},"Optional: define a docker image"),(0,r.kt)("p",null,"Once you have tested your workspace and you know how to set it up it can be helpful to define a ",(0,r.kt)("inlineCode",{parentName:"p"},"Dockerfile")," to build and publish a Docker image with everything directly installed (instead of installing your requirements after starting a generic workspace)"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Start from an existing generic Docker image, depending on the base technologies you need, such as Debian, Ubuntu, Python, JupyterLab, VisualStudio Code, RStudio..."),(0,r.kt)("li",{parentName:"ol"},"Add your source code in the Docker image using ",(0,r.kt)("inlineCode",{parentName:"li"},"ADD . .")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"COPY . .")),(0,r.kt)("li",{parentName:"ol"},"Install dependencies (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"RUN apt-get install gfortran"),")"),(0,r.kt)("li",{parentName:"ol"},"Define which command to run when starting the container (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},'ENTRYPOINT["jupyter", "lab"]'),")")),(0,r.kt)("p",null,"Here is a simple example ",(0,r.kt)("inlineCode",{parentName:"p"},"Dockerfile")," for a python application:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dockerfile"},'# The base image to start from, choose the one with everything you need installed\nFROM python:3.8\n\n# Change the user and working directory to make sure we are using root\nUSER root\nWORKDIR /root\n\n# Install additional packages\nRUN apt-get update && \\\n    apt-get install build-essentials\n\n# This line will copy all files and folder that are in the same folder as the Dockerfile (usually the code you want to run in the container)\nADD . . \n\n# This line will install all the python packages described in the requirements.txt of your source code\nRUN pip install -r requirements.txt && \\\n    pip install notebook jupyterlab\n\n# Command to run when the container is started, here it starts JupyterLab as a service\nENTRYPOINT [ "jupyter", "lab" ]\n')),(0,r.kt)("p",null,"Here are some examples of ",(0,r.kt)("inlineCode",{parentName:"p"},"Dockerfile")," for various type of web applications:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/MaastrichtU-IDS/jupyterlab/blob/main/Dockerfile"},"Custom JupyterLab")," based on the official ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/jupyter/docker-stacks"},"jupyter/docker-stacks")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/MaastrichtU-IDS/rstudio/blob/main/Dockerfile"},"Custom RStudio")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/MaastrichtU-IDS/code-server/blob/main/Dockerfile"},"VisualStudio Code server")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/MaastrichtU-IDS/knowledge-collaboratory-api/blob/master/Dockerfile"},"Python web app"))),(0,r.kt)("p",null,"See the guide to ",(0,r.kt)("a",{parentName:"p",href:"/docs/guide-publish-image"},"Publish a Docker image")," for more details on this topic."))}h.isMDXComponent=!0}}]);