"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4190],{5680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>g});var a=n(6540);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=u(n),g=i,y=c["".concat(l,".").concat(g)]||c[g]||h[g]||o;return n?a.createElement(y,r(r({ref:t},p),{},{components:n})):a.createElement(y,r({ref:t},p))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var u=2;u<o;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},9980:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>g,frontMatter:()=>s,metadata:()=>u,toc:()=>h});var a=n(9668),i=n(1367),o=(n(6540),n(5680)),r=["components"],s={id:"deploy-jupyterhub",title:"JupyterHub"},l=void 0,u={unversionedId:"deploy-jupyterhub",id:"deploy-jupyterhub",title:"JupyterHub",description:"JupyterHub is ideal to enable multiple users easily start predefined workspaces in the same project.",source:"@site/docs/deploy-jupyterhub.md",sourceDirName:".",slug:"/deploy-jupyterhub",permalink:"/docs/deploy-jupyterhub",draft:!1,editUrl:"https://github.com/MaastrichtU-IDS/dsri-documentation/edit/master/website/docs/deploy-jupyterhub.md",tags:[],version:"current",lastUpdatedBy:"Laurent Winckers",lastUpdatedAt:1768991060,formattedLastUpdatedAt:"Jan 21, 2026",frontMatter:{id:"deploy-jupyterhub",title:"JupyterHub"},sidebar:"docs",previous:{title:"MATLAB",permalink:"/docs/deploy-matlab"},next:{title:"Dask Cluster",permalink:"/docs/dask-cluster"}},p={},h=[{value:"Downloading and adjusting the config-basic.yaml",id:"downloading-and-adjusting-the-config-basicyaml",level:2},{value:"Setting user&#39;s default persistent volume size",id:"setting-users-default-persistent-volume-size",level:3},{value:"Persistent volumes",id:"persistent-volumes",level:4},{value:"Configuring an authentication method",id:"configuring-an-authentication-method",level:3},{value:"Dummy authentication",id:"dummy-authentication",level:4},{value:"allow_users / admin_users authentication",id:"allow_users--admin_users-authentication",level:4},{value:"GitHub OAuth authentication",id:"github-oauth-authentication",level:4},{value:"Configure the notebook image",id:"configure-the-notebook-image",level:3},{value:"Adjusting spawner timeouts",id:"adjusting-spawner-timeouts",level:3},{value:"Extensive customization options in config-extensive.yaml",id:"extensive-customization-options-in-config-extensiveyaml",level:2},{value:"Adjusting spawner timeouts when including multiple notebook images",id:"adjusting-spawner-timeouts-when-including-multiple-notebook-images",level:3},{value:"Deploying JupyterHub using the DSRI website \ud83e\ude90",id:"deploying-jupyterhub-using-the-dsri-website-",level:2},{value:"Installing the JupyterHub Helm Chart repository",id:"installing-the-jupyterhub-helm-chart-repository",level:3},{value:"Installing the JupyterHub Helm Chart",id:"installing-the-jupyterhub-helm-chart",level:3},{value:"Creating a secured route",id:"creating-a-secured-route",level:3},{value:"Upgrading the config-basic.yaml",id:"upgrading-the-config-basicyaml",level:3},{value:"Deploying JupyterHub using the Command Line Interface (CLI) \ud83e\ude90",id:"deploying-jupyterhub-using-the-command-line-interface-cli-",level:2},{value:"Installing the JupyterHub Helm Chart repository",id:"installing-the-jupyterhub-helm-chart-repository-1",level:3},{value:"Installing the JupyterHub Helm Chart",id:"installing-the-jupyterhub-helm-chart-1",level:3},{value:"Creating a secured route",id:"creating-a-secured-route-1",level:3},{value:"Upgrading the config-basic.yaml",id:"upgrading-the-config-basicyaml-1",level:3},{value:"Connecting to a JupyterHub instance with the API",id:"connecting-to-a-jupyterhub-instance-with-the-api",level:2}],c={toc:h};function g(e){var t=e.components,n=(0,i.A)(e,r);return(0,o.yg)("wrapper",(0,a.A)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"JupyterHub is ideal to enable multiple users easily start predefined workspaces in the same project. "),(0,o.yg)("admonition",{title:"Advanced \ud83e\uddea ",type:"info"},(0,o.yg)("p",{parentName:"admonition"},"Configuring and deploying JupyterHub can be a bit tricky. Feel free to ",(0,o.yg)("a",{parentName:"p",href:"https://servicedesk.icts.maastrichtuniversity.nl/tas/public/ssp/content/serviceflow?unid=1ffa93e9ecd94d938ad46e3cb24c2392"},"submit a ticket")," to ask for help.")),(0,o.yg)("h2",{id:"downloading-and-adjusting-the-config-basicyaml"},"Downloading and adjusting the config-basic.yaml"),(0,o.yg)("admonition",{title:"Before you begin download the config-basic.yaml",type:"warning"},(0,o.yg)("p",{parentName:"admonition"},"Download the preconfigured ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml")," from our ",(0,o.yg)("a",{parentName:"p",href:"https://raw.githubusercontent.com/MaastrichtU-IDS/dsri-documentation/refs/heads/master/applications/jupyterhub/config-basic.yaml"},"GitHub repository"),".\nThe default config that is provided by JupyterHub will not work. ")),(0,o.yg)("h3",{id:"setting-users-default-persistent-volume-size"},"Setting user's default persistent volume size"),(0,o.yg)("h4",{id:"persistent-volumes"},"Persistent volumes"),(0,o.yg)("p",null,"Persistent volumes are automatically created for each user and instance started in JupyterHub to ensure persistence of the data even if JupyterHub is stopped. You can find the persistent volumes in the DSRI web UI, go to the ",(0,o.yg)("strong",{parentName:"p"},"Administrator")," view > ",(0,o.yg)("strong",{parentName:"p"},"Storage")," > ",(0,o.yg)("strong",{parentName:"p"},"Persistent Volume Claims"),"."),(0,o.yg)("p",null,"It is possible to change the default size of a persistent volume claim for a user in the ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml"),". In our ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml")," the default value is ",(0,o.yg)("inlineCode",{parentName:"p"},"2Gi"),". However if you think that your users will need more storage space you can change this default size in the ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml"),". "),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"singleuser:\n  # ...\n  storage:\n    capacity: 2Gi\n")),(0,o.yg)("h3",{id:"configuring-an-authentication-method"},"Configuring an authentication method"),(0,o.yg)("p",null,"At the moment we support three different authentication methods. One for testing purposes (dummy authentication), one for people who are working alone in a JupyterHub instance or with one or two collaborators (allowed_users / admin_users authentication), and one for allowing groups of people to collaborate in the same JupyterHub instance (GitHub OAuth). By default the dummy authentication is set in the ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml"),". ",(0,o.yg)("strong",{parentName:"p"},"Note that this is only for testing purposes!!!")," However, with very few changes to the ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml")," you can set up the other authentication methods. For reference see ",(0,o.yg)("a",{parentName:"p",href:"https://z2jh.jupyter.org/en/stable/administrator/authentication.html"},"the zero2jupyterhub documentation about authentication methods")),(0,o.yg)("h4",{id:"dummy-authentication"},"Dummy authentication"),(0,o.yg)("p",null,"This authentication method is set by default and is only there so that you can easily test your JupyterHub instance without the need of setting up proper authentication. The catch with this method is that whatever username/password combination you fill in, you will get access! In other words this is ",(0,o.yg)("strong",{parentName:"p"},"completely not safe to use in use cases other than testing!"),"\nIn the ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml")," you see -besides the commented out other authentication methods- the following block of text:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"hub:\n  # ...\n  config:\n    JupyterHub:\n      admin_access: true\n      authenticator_class: dummy\n")),(0,o.yg)("p",null,"Some parts are intentionally left out here, shown as dots ",(0,o.yg)("inlineCode",{parentName:"p"},"# ...")," for better representation. If you are first setting up your JupyterHub instance you can leave this as is. Upon going to your instance via the URL you will get prompted with a login screen:"),(0,o.yg)("img",{src:"/img/jupyterhub-dummy-login.png",alt:"",style:{maxWidth:"75%",maxHeight:"75%"}}),(0,o.yg)("h1",{id:""}),(0,o.yg)("p",null,"Fill in any usernamer and password combination you would like and the user account will be made. Note that this user account literally is made and has its own pod in the project. It also has a persistent volume and all the other properties of any other user account created. However, you can use whatever password you want to access this account. In other words do not use this user actively and definitely do not store any (sensitive) data in this user account!"),(0,o.yg)("h4",{id:"allow_users--admin_users-authentication"},"allow_users / admin_users authentication"),(0,o.yg)("p",null,"If you will be working on your own in your JupyterHub instance it will be easiest to use the allow_users / admin_users authentication method. This method allows you to specify a user and admin account with a shared password. ",(0,o.yg)("strong",{parentName:"p"},"It is important that you keep this password a secret and safe! If people will get their hands on this they can acces your JupyterHub instance and log in as an admin, which can lead to hefty consequences.")," "),(0,o.yg)("p",null,"If you want to make use of this config uncomment the following block of text and comment out the previous block of text seen at the ",(0,o.yg)("inlineCode",{parentName:"p"},"Dummy authentication")," section above:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"hub:\n  # ...\n  config:\n    Authenticator:\n      admin_users:\n        - admin\n      allowed_users:\n        - user1\n    DummyAuthenticator:\n      password: a-shared-secret-password\n    JupyterHub:\n      authenticator_class: dummy\n")),(0,o.yg)("p",null,"Note that this password is in plaintext in your ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml"),". ",(0,o.yg)("strong",{parentName:"p"},"Do not use a password you use for other accounts, this is never a good idea and is surely not a good idea in this case!")," Unfortunately it is not possible to set passwords in JupyterHub using secrets in the DSRI at the moment. If you need to share your JupyterHub instance with others we recommend you to use the GitHub OAuth authentication method described below. "),(0,o.yg)("h4",{id:"github-oauth-authentication"},"GitHub OAuth authentication"),(0,o.yg)("p",null,"This authentication method is the most secure option we provide at the moment. It makes use of an GitHub OAuth app. The major caveat is that you and the people you want to collaborate with need a GitHub account. "),(0,o.yg)("p",null,"For creating an OAuth app in GitHub please refer to GitHub's ",(0,o.yg)("a",{parentName:"p",href:"https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/creating-an-oauth-app"},"documentation"),". "),(0,o.yg)("p",null,"The GitHub OAuth app will provide the client ID and client secret. Fill in the ",(0,o.yg)("inlineCode",{parentName:"p"},"<route name>")," and ",(0,o.yg)("inlineCode",{parentName:"p"},"<project name>")," at the ",(0,o.yg)("inlineCode",{parentName:"p"},"oauth_callback_url")," section. To set up a route to get your ",(0,o.yg)("inlineCode",{parentName:"p"},"<route name>")," see the following section: ",(0,o.yg)("a",{parentName:"p",href:"https://dsri.maastrichtuniversity.nl/docs/deploy-jupyterhub#creating-a-secured-route"},"Creating a secured route using the DSRI website"),", or ",(0,o.yg)("a",{parentName:"p",href:"https://dsri.maastrichtuniversity.nl/docs/deploy-jupyterhub#creating-a-secured-route-1"},"Creating a secured route using the CLI"),". Note that you can change the ",(0,o.yg)("inlineCode",{parentName:"p"},"<route name>")," at a later moment by upgrading the ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml"),". "),(0,o.yg)("p",null,"Access is granted based on username. Admin privileges are set for users in the ",(0,o.yg)("inlineCode",{parentName:"p"},"admin_users")," group, while ",(0,o.yg)("inlineCode",{parentName:"p"},"allowed_users")," are regular users that are able to log in to the instance."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"hub:\n  # ...\n  config:\n    GitHubOAuthenticator:\n      client_id: your-client-id\n      client_secret: your-client-secret\n      oauth_callback_url: https://<route name>-<project name>.apps.dsri2.unimaas.nl/hub/oauth_callback\n      admin_users:\n        - username\n      allowed_users:\n        - username1\n        - username2\n      scope:\n        - read:org\n    JupyterHub:\n      authenticator_class: github\n")),(0,o.yg)("p",null,"Moreover, it is possible to grant users access to the instance via an GitHub organization. For this, you will need to create an organization, or have admin rights in an organization.\nTo set up an organization, please refer to GitHub's ",(0,o.yg)("a",{parentName:"p",href:"https://docs.github.com/en/organizations"},"documentation"),". "),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Make sure that the OAuth app for allowing organizations is made within the organization and not for your personal GitHub account!")," From the organization's GitHub page in the left sidebar, click ",(0,o.yg)("inlineCode",{parentName:"p"},"Developer settings"),". Then, in the left sidebar, click ",(0,o.yg)("inlineCode",{parentName:"p"},"OAuth apps"),". "),(0,o.yg)("p",null,"Using this method, you grant people authorization to log in to the JupyterHub instance with their GitHub account based on GitHub organization membership. Users who need admin privileges should be added to the ",(0,o.yg)("inlineCode",{parentName:"p"},"admin_users")," group in the config. Add your own GitHub username to this list so you are sure you have admin privileges."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"hub:\n  # ...\n  config:\n    GitHubOAuthenticator:\n      client_id: your-client-id\n      client_secret: your-client-secret\n      oauth_callback_url: https://<route name>-<project name>.apps.dsri2.unimaas.nl/hub/oauth_callback\n      admin_users:\n        - username\n      allowed_organizations:\n        - my-github-organization\n      scope:\n        - read:org\n    JupyterHub:\n      authenticator_class: github\n")),(0,o.yg)("p",null,"It is also possible to limit the access to specific teams in your organization. This allows to give more granular access based on team membership within the organization."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"hub:\n  # ...\n  config:\n    GitHubOAuthenticator:\n      client_id: your-client-id\n      client_secret: your-client-secret\n      oauth_callback_url: https://<route name>-<project name>.apps.dsri2.unimaas.nl/hub/oauth_callback\n      admin_users:\n        - username\n      allowed_organizations:\n        - my-github-organization:my-team\n      scope:\n        - read:org\n    JupyterHub:\n      authenticator_class: github\n")),(0,o.yg)("h1",{id:"-1"}),(0,o.yg)("admonition",{title:"UM SSO login",type:"info"},(0,o.yg)("p",{parentName:"admonition"},"It is possible to enable UM SSO login for your JupyterHub instance. However, this needs some setting up from our side. If you would like to enable this, please send an email to ",(0,o.yg)("a",{parentName:"p",href:"mailto:rcs-ub@maastrichtuniversity.nl"},"rcs-ub@maastrichtuniversity.nl"),".")),(0,o.yg)("h3",{id:"configure-the-notebook-image"},"Configure the notebook image"),(0,o.yg)("p",null,"The default notebook image used in the ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml")," is the ",(0,o.yg)("inlineCode",{parentName:"p"},"k8s-singleuser-sample")," image, version ",(0,o.yg)("inlineCode",{parentName:"p"},"3.3.8"),"."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"singleuser:\n  #...\n  image:\n    name: quay.io/jupyterhub/k8s-singleuser-sample\n    pullPolicy: null\n    pullSecrets: []\n    tag: 3.3.8\n")),(0,o.yg)("p",null,"It is, however, possible to change this notebook image to configure the JupyterHub instance to start up user pods with a customized image, which could have various things installed such as different kernels, packages and/or extensions.\nFor more information about different images provided by Jupyter, please refer to their ",(0,o.yg)("a",{parentName:"p",href:"https://jupyter-docker-stacks.readthedocs.io/en/latest/using/selecting.html"},"documentation"),"."),(0,o.yg)("p",null,"For example you can change the notebook image to their Tensorflow image, which comes with Tensorflow pre-installed!"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"singleuser\n  #...\n  image:\n    name: quay.io/jupyter/tensorflow-notebook\n    pullPolicy: null\n    pullSecrets: []\n    tag: 87b37b4fd818\n")),(0,o.yg)("p",null,"Note that we chose the latest tag at the time of writing: ",(0,o.yg)("inlineCode",{parentName:"p"},"87b37b4fd818"),". Change this tag accordingly if a more recent release is available! You can find their releases via their Quay.io repository: ",(0,o.yg)("a",{parentName:"p",href:"https://quay.io/organization/jupyter"},"https://quay.io/organization/jupyter"),"."),(0,o.yg)("h3",{id:"adjusting-spawner-timeouts"},"Adjusting spawner timeouts"),(0,o.yg)("p",null,'If the sessions fail to start with a "spawner failed" or "timeout" error, it may be because the user\'s container is taking too long to become read.'),(0,o.yg)("p",null,"To fix this, the start_timeout can be increased (for the pod to start) and http_timeout (for the Jupyter server to respond) in the ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml"),".\nThe following configuration sets both timeouts to 300 seconds (5 minutes), which is a robust starting point for most environments."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"hub:\n  # ...\n  config:\n    KubeSpawner:\n      start_timeout: 300\n      http_timeout: 300\n")),(0,o.yg)("h1",{id:"-2"}),(0,o.yg)("h2",{id:"extensive-customization-options-in-config-extensiveyaml"},"Extensive customization options in config-extensive.yaml"),(0,o.yg)("p",null,"It is possible to customize your JupyterHub instance further. For example we created a ",(0,o.yg)("inlineCode",{parentName:"p"},"config-extensive.yaml")," file which has some customization options configured."),(0,o.yg)("admonition",{title:"Download the config-extensive.yaml",type:"info"},(0,o.yg)("p",{parentName:"admonition"},"Download the preconfigured ",(0,o.yg)("inlineCode",{parentName:"p"},"config-extensive.yaml")," from our ",(0,o.yg)("a",{parentName:"p",href:"https://raw.githubusercontent.com/MaastrichtU-IDS/dsri-documentation/refs/heads/master/applications/jupyterhub/config-extensive.yaml"},"GitHub repository"),". ")),(0,o.yg)("p",null,"In this configuration we disabled culling so that user pods will not be scaled down after a time of inactivity. This can easily be activated again changing ",(0,o.yg)("inlineCode",{parentName:"p"},"cull: > enabled: false")," to ",(0,o.yg)("inlineCode",{parentName:"p"},"true"),"."),(0,o.yg)("p",null,"Next, we extended the startup command to install a Python package ",(0,o.yg)("inlineCode",{parentName:"p"},"papersize")," upon user pod creation. Additionally, we pull a public GitHub repository, if it does not exist already, to the ",(0,o.yg)("inlineCode",{parentName:"p"},"/home/jovyan/materials")," directory. This directory will automatically be made if it does not exist already. "),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"singleuser:\n  #...\n  # Remove the git clone part or fill in a valid URL, otherwise the user-pod will not start!\n  cmd:\n    - /bin/bash\n    - '-c'\n    - >-\n      pip install papersize && [ \"$(ls -A /home/jovyan/materials 2>/dev/null)\" ]\n      || git clone https://github.com/EbookFoundation/free-programming-books.git\n      /home/jovyan/materials && exec jupyterhub-singleuser\n")),(0,o.yg)("p",null,"Finally, we chose to include two additional notebook images. Besides the minimal image, we include the data science and Tensorflow images. These notebook images come with other kernels, packages and extensions installed. For more information about different images provided by Jupyter, please refer to their ",(0,o.yg)("a",{parentName:"p",href:"https://jupyter-docker-stacks.readthedocs.io/en/latest/using/selecting.html"},"documentation"),"."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},'image:\n    name: quay.io/jupyter/minimal-notebook\n    pullPolicy: null\n    pullSecrets: []\n    tag: 87b37b4fd818\n  profileList:\n    - display_name: "Minimal environment"\n      description: "To avoid too much bells and whistles: Python."\n      default: true\n    - display_name: "Datascience environment"\n      description: "If you want the additional bells and whistles: Python, R, and Julia."\n      kubespawner_override:\n        image: quay.io/jupyter/datascience-notebook:87b37b4fd818\n    - display_name: "Tensorflow environment"\n      description: "Here you have Tensorflow installed!"\n      kubespawner_override:\n        image: quay.io/jupyter/tensorflow-notebook:87b37b4fd818\n')),(0,o.yg)("p",null,"Note that we chose the latest tag at the time of writing: ",(0,o.yg)("inlineCode",{parentName:"p"},"87b37b4fd818"),". Change this tag accordingly if a more recent release is available! You can find their releases via their Quay.io repository: ",(0,o.yg)("a",{parentName:"p",href:"https://quay.io/organization/jupyter"},"https://quay.io/organization/jupyter"),"."),(0,o.yg)("p",null,"Upon the first creation of the user pod, in other words when the user logs in for the first time. They will see a menu where they can choose their preconfigured notebook by choice. "),(0,o.yg)("img",{src:"/img/jupyterhub-notebookchoice-login.png",alt:"",style:{maxWidth:"75%",maxHeight:"75%"}}),(0,o.yg)("h3",{id:"adjusting-spawner-timeouts-when-including-multiple-notebook-images"},"Adjusting spawner timeouts when including multiple notebook images"),(0,o.yg)("p",null,'If the sessions fail to start with a "spawner failed" or "timeout" error, it may be because the user\'s container is taking too long to become read.'),(0,o.yg)("p",null,"To fix this, the start_timeout can be increased (for the pod to start) and http_timeout (for the Jupyter server to respond) in the ",(0,o.yg)("inlineCode",{parentName:"p"},"config-extensive.yaml"),".\nThe following configuration sets both timeouts to 300 seconds (5 minutes), which is a robust starting point for most environments."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},'image:\n  # ...\n  profileList:\n    # ...\n    - display_name: "Tensorflow environment"\n      description: "Here you have Tensorflow installed!"\n      kubespawner_override:\n        image: quay.io/jupyter/tensorflow-notebook:87b37b4fd818\n        start_timeout: 300\n        http_timeout: 300\n')),(0,o.yg)("h1",{id:"-3"}),(0,o.yg)("h2",{id:"deploying-jupyterhub-using-the-dsri-website-"},"Deploying JupyterHub using the DSRI website \ud83e\ude90"),(0,o.yg)("admonition",{title:"Before you begin download the config-basic.yaml",type:"warning"},(0,o.yg)("p",{parentName:"admonition"},"Download the preconfigured ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml")," from our ",(0,o.yg)("a",{parentName:"p",href:"https://raw.githubusercontent.com/MaastrichtU-IDS/dsri-documentation/refs/heads/master/applications/jupyterhub/config-basic.yaml"},"GitHub repository"),".\nThe default config that is provided by JupyterHub will not work. ")),(0,o.yg)("h3",{id:"installing-the-jupyterhub-helm-chart-repository"},"Installing the JupyterHub Helm Chart repository"),(0,o.yg)("p",null,"After you have created a project you can start with installing the JupyterHub Helm Chart. If you do not have access to DSRI or created a project yet, and you need to find out how, please refer to our ",(0,o.yg)("a",{parentName:"p",href:"https://dsri.maastrichtuniversity.nl/docs/"},"documentation.")),(0,o.yg)("admonition",{title:"Helm Chart already available",type:"info"},(0,o.yg)("p",{parentName:"admonition"},"The Helm Chart should be already made available for everyone to use on the DSRI platform. There will be no need to install the repository yourself.")),(0,o.yg)("h1",{id:"-4"}),(0,o.yg)("p",null,"In ",(0,o.yg)("inlineCode",{parentName:"p"},"Developer")," mode in your project, go to ",(0,o.yg)("inlineCode",{parentName:"p"},"Helm")," in the sidepanel (1). Next, click on ",(0,o.yg)("inlineCode",{parentName:"p"},"Create")," and choose ",(0,o.yg)("inlineCode",{parentName:"p"},"Repository")," (2)."),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-repo-add-one.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-5"}),(0,o.yg)("p",null,"Then fill in the ",(0,o.yg)("inlineCode",{parentName:"p"},"Name"),", ",(0,o.yg)("inlineCode",{parentName:"p"},"Display Name"),", give it a ",(0,o.yg)("inlineCode",{parentName:"p"},"Description")," and fill in the ",(0,o.yg)("inlineCode",{parentName:"p"},"URL"),": ",(0,o.yg)("a",{parentName:"p",href:"https://hub.jupyter.org/helm-chart/"},"https://hub.jupyter.org/helm-chart/"),". "),(0,o.yg)("h1",{id:"-6"}),(0,o.yg)("p",null,"Next, click ",(0,o.yg)("inlineCode",{parentName:"p"},"Create"),". "),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-repo-add-two.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-7"}),(0,o.yg)("h3",{id:"installing-the-jupyterhub-helm-chart"},"Installing the JupyterHub Helm Chart"),(0,o.yg)("admonition",{type:"info"},(0,o.yg)("p",{parentName:"admonition"},"At the moment the latest -and only- Helm Chart version which is supported by DSRI is version 3.3.8. Newer versions will not work, and older versions are not tested and/or configured!")),(0,o.yg)("h1",{id:"-8"}),(0,o.yg)("p",null,"In ",(0,o.yg)("inlineCode",{parentName:"p"},"Developer")," mode in your project, go to ",(0,o.yg)("inlineCode",{parentName:"p"},"Helm")," in the sidepanel (1). Next, click on ",(0,o.yg)("inlineCode",{parentName:"p"},"Create")," and choose ",(0,o.yg)("inlineCode",{parentName:"p"},"Helm Release")," (2)"),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-install-one.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-9"}),(0,o.yg)("p",null,"Search for ",(0,o.yg)("inlineCode",{parentName:"p"},"jupyterhub")," (or the name you gave the repository if you added the repository yourself), and choose the ",(0,o.yg)("inlineCode",{parentName:"p"},"JupyterHub")," Helm Chart (1)."),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-install-two.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-10"}),(0,o.yg)("p",null,"Click ",(0,o.yg)("inlineCode",{parentName:"p"},"Create"),"."),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-install-three.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-11"}),(0,o.yg)("p",null,"Click the ",(0,o.yg)("inlineCode",{parentName:"p"},"Chart version")," drop down menu (1)."),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-install-four.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-12"}),(0,o.yg)("p",null,"And choose the right Chart version: ",(0,o.yg)("inlineCode",{parentName:"p"},"3.3.8")," (1). Note that this is an important step, as we only support version 3.3.8 at the moment. Newer versions do not work yet and older versions we did not configure and/or test! "),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-install-five.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-13"}),(0,o.yg)("p",null,"Now, change the config with the content of the ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml")," you have downloaded from our ",(0,o.yg)("a",{parentName:"p",href:"https://raw.githubusercontent.com/MaastrichtU-IDS/dsri-documentation/refs/heads/master/applications/jupyterhub/config-basic.yaml"},"GitHub repository"),".\nCopy the content of the ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml")," and paste it in the highlighted box to replace the old with the new config. Click ",(0,o.yg)("inlineCode",{parentName:"p"},"Create")," to install the JupyterHub Helm Chart."),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-install-six.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-14"}),(0,o.yg)("h3",{id:"creating-a-secured-route"},"Creating a secured route"),(0,o.yg)("p",null,"Create a secured route, with TLS edge termination."),(0,o.yg)("p",null,"In ",(0,o.yg)("inlineCode",{parentName:"p"},"Developer")," mode in your project, go to ",(0,o.yg)("inlineCode",{parentName:"p"},"Project")," in the sidepanel (1). Next, click on ",(0,o.yg)("inlineCode",{parentName:"p"},"Route")," (2)."),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-route-one.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-15"}),(0,o.yg)("p",null,"Next, click ",(0,o.yg)("inlineCode",{parentName:"p"},"Create"),"."),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-route-two.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-16"}),(0,o.yg)("p",null,"Fill in the ",(0,o.yg)("inlineCode",{parentName:"p"},"Name")," (1), choose the ",(0,o.yg)("inlineCode",{parentName:"p"},"Service"),": ",(0,o.yg)("inlineCode",{parentName:"p"},"proxy-public")," (2), choose the ",(0,o.yg)("inlineCode",{parentName:"p"},"Target Port"),": ",(0,o.yg)("inlineCode",{parentName:"p"},"80 -> http (TCP)")," (3), tick the box ",(0,o.yg)("inlineCode",{parentName:"p"},"Secure Route")," (4), and finally choose ",(0,o.yg)("inlineCode",{parentName:"p"},"TLS Termination"),": ",(0,o.yg)("inlineCode",{parentName:"p"},"Edge")," (5). Next, click ",(0,o.yg)("inlineCode",{parentName:"p"},"Create"),", to create the route."),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-route-three.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h3",{id:"upgrading-the-config-basicyaml"},"Upgrading the config-basic.yaml"),(0,o.yg)("p",null,"You can upgrade your ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml")," easily in the DSRI web UI if you would like to change certain settings, such as user's default persistent volume claims, authentication methods, and many more things. Note that in some cases users who created an account with an old authentication method will still have access via that method, make sure you set up your preferred authentication method before allowing users to authenticate and use the JupyterHub instance."),(0,o.yg)("h1",{id:"-17"}),(0,o.yg)("p",null,"In ",(0,o.yg)("inlineCode",{parentName:"p"},"Developer")," mode in your project, go to ",(0,o.yg)("inlineCode",{parentName:"p"},"Helm")," in the sidepanel (1). Next, click on your Helm Chart Release (2)."),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-upgrade-chart-one.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-18"}),(0,o.yg)("p",null,"Now, click the ",(0,o.yg)("inlineCode",{parentName:"p"},"Actions")," drop down menu, and choose ",(0,o.yg)("inlineCode",{parentName:"p"},"Upgrade")," (1)."),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-upgrade-chart-two.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-19"}),(0,o.yg)("p",null,"In the box -highlighted in the picutre below- you can make changes to the config-basic.yaml. After you have made your changes, click ",(0,o.yg)("inlineCode",{parentName:"p"},"Upgrade")," and your upgraded JupyterHub Helm Chart Release will automatically be deployed."),(0,o.yg)("img",{src:"/img/jupyterhub-helm-chart-upgrade-chart-three.png",alt:"",style:{maxWidth:"100%",maxHeight:"100%"}}),(0,o.yg)("h1",{id:"-20"}),(0,o.yg)("admonition",{title:"Configure JupyterHub",type:"success"},(0,o.yg)("p",{parentName:"admonition"},"Feel free to ",(0,o.yg)("a",{parentName:"p",href:"https://servicedesk.icts.maastrichtuniversity.nl/tas/public/ssp/content/serviceflow?unid=1ffa93e9ecd94d938ad46e3cb24c2392"},"submit a ticket")," to ask for help configuring your JupyterHub.")),(0,o.yg)("h1",{id:"-21"}),(0,o.yg)("h2",{id:"deploying-jupyterhub-using-the-command-line-interface-cli-"},"Deploying JupyterHub using the Command Line Interface (CLI) \ud83e\ude90"),(0,o.yg)("admonition",{title:"Before you begin download the config-basic.yaml",type:"warning"},(0,o.yg)("p",{parentName:"admonition"},"Download the preconfigured ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml")," from our ",(0,o.yg)("a",{parentName:"p",href:"https://raw.githubusercontent.com/MaastrichtU-IDS/dsri-documentation/refs/heads/master/applications/jupyterhub/config-basic.yaml"},"GitHub repository"),".\nThe default config that is provided by JupyterHub will not work. ")),(0,o.yg)("h3",{id:"installing-the-jupyterhub-helm-chart-repository-1"},"Installing the JupyterHub Helm Chart repository"),(0,o.yg)("p",null,"After you have created a project you can start with installing the JupyterHub Helm Chart. If you do not have access to DSRI or created a project yet, and you need to find out how, please refer to our ",(0,o.yg)("a",{parentName:"p",href:"https://dsri.maastrichtuniversity.nl/docs/"},"documentation.")),(0,o.yg)("admonition",{title:"Helm Chart already available",type:"info"},(0,o.yg)("p",{parentName:"admonition"},"The Helm Chart should be already made available for everyone to use on the DSRI platform. There will be no need to install the repository yourself.")),(0,o.yg)("h1",{id:"-22"}),(0,o.yg)("p",null,"Add the JupyterHub Helm Chart repository:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"helm repo add jupyterhub https://hub.jupyter.org/helm-chart/\nhelm repo update\n")),(0,o.yg)("h3",{id:"installing-the-jupyterhub-helm-chart-1"},"Installing the JupyterHub Helm Chart"),(0,o.yg)("admonition",{type:"info"},(0,o.yg)("p",{parentName:"admonition"},"At the moment the latest -and only- Helm Chart version which is supported by DSRI is version 3.3.8. Newer versions will not work, and older versions are not tested and/or configured!")),(0,o.yg)("h1",{id:"-23"}),(0,o.yg)("p",null,"Make sure you use the right ",(0,o.yg)("inlineCode",{parentName:"p"},"config-basic.yaml")," downloaded from our ",(0,o.yg)("a",{parentName:"p",href:"https://raw.githubusercontent.com/MaastrichtU-IDS/dsri-documentation/refs/heads/master/applications/jupyterhub/config-basic.yaml"},"GitHub repository"),"."),(0,o.yg)("p",null,"Install the Helm Chart using the following command:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"helm upgrade --cleanup-on-fail \\\n  --install jupyterhub jupyterhub/jupyterhub \\\n  --version=3.3.8 \\\n  --namespace=<project name> \\\n  --values config-basic.yaml\n")),(0,o.yg)("p",null,(0,o.yg)("inlineCode",{parentName:"p"},"<project name>")," is the name of your project."),(0,o.yg)("h3",{id:"creating-a-secured-route-1"},"Creating a secured route"),(0,o.yg)("p",null,"Create a secured route, with TLS edge termination:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"oc create route edge <NAME OF ROUTE> --namespace <project name> --service=proxy-public --port=http\n")),(0,o.yg)("p",null,(0,o.yg)("inlineCode",{parentName:"p"},"<project name>")," is the name of your project.\n",(0,o.yg)("inlineCode",{parentName:"p"},"<NAME OF ROUTE>")," is the name of the route. "),(0,o.yg)("h3",{id:"upgrading-the-config-basicyaml-1"},"Upgrading the config-basic.yaml"),(0,o.yg)("p",null,"Run the following command with your new config-basic.yaml:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"helm upgrade --cleanup-on-fail \\\n  --install jupyterhub jupyterhub/jupyterhub \\\n  --version=3.3.8 \\\n  --namespace=<project name> \\\n  --values config-basic.yaml\n")),(0,o.yg)("p",null,(0,o.yg)("inlineCode",{parentName:"p"},"<project name>")," is the name of your project."),(0,o.yg)("h1",{id:"-24"}),(0,o.yg)("admonition",{title:"Configure JupyterHub",type:"success"},(0,o.yg)("p",{parentName:"admonition"},"Feel free to ",(0,o.yg)("a",{parentName:"p",href:"https://servicedesk.icts.maastrichtuniversity.nl/tas/public/ssp/content/serviceflow?unid=1ffa93e9ecd94d938ad46e3cb24c2392"},"submit a ticket")," to ask for help configuring your JupyterHub.")),(0,o.yg)("h2",{id:"connecting-to-a-jupyterhub-instance-with-the-api"},"Connecting to a JupyterHub instance with the API"),(0,o.yg)("p",null,"It is possible to use API calls to interact with your JupyterHub instance. For more information about the JupyterHub API you can find their documentation ",(0,o.yg)("a",{parentName:"p",href:"https://jupyterhub.readthedocs.io/en/stable/reference/rest-api.html"},"here"),"."),(0,o.yg)("p",null,"To make us of the API, first you need to access your personal API token. In your JupyterHub instance, after logging in, click ",(0,o.yg)("inlineCode",{parentName:"p"},"File")," in the top left corner. Then click ",(0,o.yg)("inlineCode",{parentName:"p"},"Hub Control Panel"),", and you will navigate to your Hub's control panel. Then click ",(0,o.yg)("inlineCode",{parentName:"p"},"Token")," in the top navigation bar. "),(0,o.yg)("p",null,"You will navigate to your API token management page. Here you can request a new API token for yourself by clicking the ",(0,o.yg)("inlineCode",{parentName:"p"},"Request new API token")," button. You can choose to let the API token expire in one hour, one day, one week or to never let the token expire."),(0,o.yg)("p",null,"Furthermore, you can revoke existing tokens and you can manage authorized applications which are linked via OAuth token to your JupyterHub."),(0,o.yg)("p",null,"This is an example on how to request all users with the JupyterHub API using the Python programming language:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"import requests\nimport json\n\napi_token = ' <TOKEN>'\napi_url = '<URL>/hub/api'\n\nr = requests.get(f'{api_url}/users',\n    headers={\n        'Authorization': f'token {api_token}',\n})\n\nstatus_code = r.status_code\nprint('Status code:', status_code)\n\nstatus = r.raise_for_status()\nprint('Status:', status)\n\nusers = r.json()\nprint(json.dumps(users, indent=3))\n")),(0,o.yg)("p",null,"Where ",(0,o.yg)("inlineCode",{parentName:"p"},"<TOKEN>")," is your API token. And ",(0,o.yg)("inlineCode",{parentName:"p"},"<URL>")," is your JupyterHub instance's URL."))}g.isMDXComponent=!0}}]);