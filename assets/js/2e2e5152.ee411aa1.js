"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3967],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),m=o,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return n?a.createElement(h,r(r({ref:t},c),{},{components:n})):a.createElement(h,r({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var p=2;p<i;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6120:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>s,metadata:()=>p,toc:()=>u});var a=n(3117),o=n(102),i=(n(7294),n(3905)),r=["components"],s={id:"guide-known-issues",title:"Known Issues"},l=void 0,p={unversionedId:"guide-known-issues",id:"guide-known-issues",title:"Known Issues",description:"Cannot access your data in the persistent folder",source:"@site/docs/guide-known-issues.md",sourceDirName:".",slug:"/guide-known-issues",permalink:"/docs/guide-known-issues",draft:!1,editUrl:"https://github.com/MaastrichtU-IDS/dsri-documentation/edit/master/website/docs/guide-known-issues.md",tags:[],version:"current",lastUpdatedBy:"Chris Kuipers",lastUpdatedAt:1681741858,formattedLastUpdatedAt:"Apr 17, 2023",frontMatter:{id:"guide-known-issues",title:"Known Issues"},sidebar:"docs",previous:{title:"Increase your processes speed",permalink:"/docs/increase-process-speed"},next:{title:"Create a new Project",permalink:"/docs/project-management"}},c={},u=[{value:"Cannot access your data in the persistent folder",id:"cannot-access-your-data-in-the-persistent-folder",level:2},{value:"DockerHub pull limitations",id:"dockerhub-pull-limitations",level:2},{value:"How to run function within a container &#39;&#39;in the background&#39;",id:"how-to-run-function-within-a-container-in-the-background",level:2},{value:"Git authentication issue",id:"git-authentication-issue",level:2},{value:"Windows:",id:"windows",level:5},{value:"Mac:",id:"mac",level:5},{value:"Filebrowser 403 forbidden",id:"filebrowser-403-forbidden",level:2}],d={toc:u};function m(e){var t=e.components,n=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"cannot-access-your-data-in-the-persistent-folder"},"Cannot access your data in the persistent folder"),(0,i.kt)("p",null,"Sometimes you cannot access anymore the data you put in the persistent folder of your container. It can be due to a node going down, if the persistent volume your pod is connected to is on this node, then it cannot access it anymore."),(0,i.kt)("p",null,"You can easily fix this issue by restarting the pod of your application, it will make it properly connect to resources on nodes that are up."),(0,i.kt)("p",null,"To restart the pod, go in topology, click on your application, go to the details tab, and decrease the pod count to 0, then put it back up to 1."),(0,i.kt)("h2",{id:"dockerhub-pull-limitations"},"DockerHub pull limitations"),(0,i.kt)("admonition",{title:"Spot the issue",type:"warning"},(0,i.kt)("p",{parentName:"admonition"},"If the ",(0,i.kt)("strong",{parentName:"p"},"Events")," tab show this error:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre"},"--\x3e Scaling filebrowser-case-1 to 1\nerror: update acceptor rejected my-app-1: pods for rc 'my-project/my-app-1' took longer than 600 seconds to become available\n")),(0,i.kt)("p",{parentName:"admonition"},"Then check for the application ImageStream in ",(0,i.kt)("strong",{parentName:"p"},"Build")," > ",(0,i.kt)("strong",{parentName:"p"},"Images"),", and you might see this for your application image:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre"},"Internal error occurred: toomanyrequests: You have reached your pull rate limit. \nYou may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit.\n"))),(0,i.kt)("p",null,"You can solve this by creating a secret to login to DockerHub in your project:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"oc create secret docker-registry dockerhub-login --docker-server=docker.io --docker-username=dockerhub_username --docker-password=dockerhub_password --docker-email=example@mail.com\n")),(0,i.kt)("p",null,"Linking the login secret to the default service account:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"oc secrets link default dockerhub-login --for=pull\n")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Login to DockerHub should raise the limitations")),(0,i.kt)("p",null,"To definitely solve this issue you can publish the DockerHub image to the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.github.com/en/packages/guides/about-github-container-registry"},"GitHub Container Registry"),"."),(0,i.kt)("p",null,"Follow those instructions on your laptop:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"https://maastrichtu-ids.github.io/dsri-documentation/docs/guide-publish-image#login-to-github-container-registry"},"Login to the GitHub Container Registry")," with ",(0,i.kt)("inlineCode",{parentName:"p"},"docker login"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Pull the docker image from "),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"docker pull myorg/myimage:latest\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Change its tag"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"docker tag myorg/myimage:latest ghcr.io/maastrichtu-ids/myimage:latest\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Push it back to the GitHub Container Registry:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"docker push ghcr.io/maastrichtu-ids/myimage:latest\n")))),(0,i.kt)("admonition",{title:"Image created automatically",type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"If the image does not exist, GitHub will create automatically when you push it for the first time! You can then head to your ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/orgs/MaastrichtU-IDS/packages"},"organization ",(0,i.kt)("strong",{parentName:"a"},"Packages")," tab")," to see the package.")),(0,i.kt)("admonition",{title:"Make it public",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"By default new images are set as ",(0,i.kt)("inlineCode",{parentName:"p"},"Private"),", go to your ",(0,i.kt)("strong",{parentName:"p"},"Package Settings"),", and click ",(0,i.kt)("strong",{parentName:"p"},"Change Visibility")," to set it as ",(0,i.kt)("inlineCode",{parentName:"p"},"Public"),", this avoids the need to login to pull the image.")),(0,i.kt)("p",null,"You can update the image if you want access to the latest version, you can set a GitHub Actions workflow to do so."),(0,i.kt)("p",null,"Finally you will need to update your DSRI deployment, or template, to use the newly created image on ",(0,i.kt)("inlineCode",{parentName:"p"},"ghcr.io"),", and redeploy the application with the new template."),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"how-to-run-function-within-a-container-in-the-background"},"How to run function within a container ''in the background'"),(0,i.kt)("admonition",{title:"Spot the issue",type:"warning"},(0,i.kt)("p",{parentName:"admonition"},"If the ",(0,i.kt)("strong",{parentName:"p"},"Events")," tab show this error:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre"},"--\x3e cd /usr/local/src/work2/aerius-sample-sequencing/CD4K4ANXX\n\nTrinity --seqType fq --max_memory 100G --CPU 64 --samples_file samples.txt --output /usr/local/src/work2/Trinity_output_zip_090221\nerror: The function starts but at some points just exits without warnings or errors to Windows folder\n")),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre"},"DSRI in the container's terminal keep running fine but never finishes. At some point a red label ''disconnected'' appears and the terminal stops and the analysis never continues.\n"))),(0,i.kt)("p",null,"Those two issues are due to the process running attach to the terminal"),(0,i.kt)("p",null,'Should be able to easily run it using the "Bash way": add ',(0,i.kt)("inlineCode",{parentName:"p"},"nohup")," at the beginning and ",(0,i.kt)("inlineCode",{parentName:"p"},"&")," at the end\nIt will run in the back and all output that should have gone to the terminal will go to a file ",(0,i.kt)("inlineCode",{parentName:"p"},"nohup.out")," in the repo"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"nohup Trinity --seqType fq --max_memory 100G --CPU 64 --samples_file samples.txt --output /usr/local/src/work2/Trinity_output_zip_090221 &\n")),(0,i.kt)("p",null,"To check if it is still running:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"ps aux | grep Trinity\n")),(0,i.kt)("p",null,'Be careful make sure the terminal uses bash and not shell ("sh")'),(0,i.kt)("p",null,"To use bash just type bash in the terminal:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"bash\n")),(0,i.kt)("h2",{id:"git-authentication-issue"},"Git authentication issue"),(0,i.kt)("admonition",{type:"warning"},(0,i.kt)("p",{parentName:"admonition"},"\u26a0\ufe0f remote: HTTP Basic: Access denied fatal: Authentication failed for")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"It happen every time when we forced to change the Windows password."),(0,i.kt)("img",{class:"screenshot",src:"/img/authentication-issue.png",style:{zoom:"100%",maxHeight:"500px",maxWidth:"500px"}}),(0,i.kt)("img",{class:"screenshot",src:"/img/git-authentication-issue.png",style:{zoom:"100%",maxHeight:"500px",maxWidth:"500px"}})),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Apply command from powershell ",(0,i.kt)("strong",{parentName:"p"},"(run as administrator)")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"git config --system --unset credential.helper")))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"And then remove ",(0,i.kt)("strong",{parentName:"p"},"gitconfig")," file from ",(0,i.kt)("strong",{parentName:"p"},"C:\\Program Files\\Git\\mingw64/etc/"),' location (Note: this path will be different in MAC like "/Users/username")')),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"After that use git command like ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"git pull")," or ",(0,i.kt)("inlineCode",{parentName:"strong"},"git push")),", it asked me for username and password. applying valid username and password and git command working."))),(0,i.kt)("h5",{id:"windows"},"Windows:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Go to Windows ",(0,i.kt)("strong",{parentName:"li"},"Credential Manager"),". This is done in a EN-US Windows by pressing the Windows Key and typing 'credential'. In other localized Windows variants you need to use the localized term.")),(0,i.kt)("img",{class:"screenshot",src:"/img/windows-credentials.png",alt:"Windows Credentials",style:{zoom:"100%",maxHeight:"500px",maxWidth:"500px"}}),(0,i.kt)("p",null,"   ",(0,i.kt)("em",{parentName:"p"},"alternatively")," you can use the shortcut ",(0,i.kt)("inlineCode",{parentName:"p"},"control /name Microsoft.CredentialManager")," in the run dialog (WIN+R)"),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Edit the git entry under Windows Credentials, replacing old password with the new one.")),(0,i.kt)("h5",{id:"mac"},"Mac:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'cmd+space and type "KeyChain Access",')),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'You should find a key with the name like "gitlab.*.com Access Key for user". You can order by date modified to find it more easily.'))),(0,i.kt)("img",{class:"screenshot",src:"/img/Mac-git-autentication.png",alt:"Mac GIT Autentication",style:{zoom:"100%",maxHeight:"500px",maxWidth:"500px"}}),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Right click and delete.")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"filebrowser-403-forbidden"},"Filebrowser 403 forbidden"),(0,i.kt)("admonition",{title:"Spot the issue",type:"warning"},(0,i.kt)("p",{parentName:"admonition"},"If you get 403 forbidden issue while try to upload folders / files or creating new folder / file "),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre"},"403 forbidden \n"))),(0,i.kt)("img",{class:"screenshot",src:"/img/forbidden-issue.png",alt:"Forbidden Issue",style:{zoom:"100%",maxHeight:"500px",maxWidth:"500px"}}),(0,i.kt)("p",null,"Above issue will occur if you are not using the ",(0,i.kt)("strong",{parentName:"p"},"persistent storage"),"."),(0,i.kt)("p",null,"A persistent storage can be created by the DSRI team for a persistent storage of the data. ",(0,i.kt)("a",{parentName:"p",href:"http://localhost:3000/dsri-documentation/help"},"Contact the DSRI team")," to request a persistent storage."),(0,i.kt)("p",null,"You can find the persistent storage name as below"),(0,i.kt)("img",{class:"screenshot",src:"/img/persistent_storage.png",alt:"Storage",style:{zoom:"100%",maxHeight:"500px",maxWidth:"500px"}}))}m.isMDXComponent=!0}}]);