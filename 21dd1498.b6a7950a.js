(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{127:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return d}));var n=r(0),a=r.n(n);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},u=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(r),m=n,d=u["".concat(i,".").concat(m)]||u[m]||b[m]||o;return r?a.a.createElement(d,s(s({ref:t},l),{},{components:r})):a.a.createElement(d,s({ref:t},l))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var l=2;l<o;l++)i[l]=r[l];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},80:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return i})),r.d(t,"metadata",(function(){return s})),r.d(t,"rightToc",(function(){return c})),r.d(t,"default",(function(){return p}));var n=r(3),a=r(7),o=(r(0),r(127)),i={id:"openshift-storage",title:"Storage and restrictions"},s={unversionedId:"openshift-storage",id:"openshift-storage",isDocsHomePage:!1,title:"Storage and restrictions",description:"OpenShift images restrictions",source:"@site/docs/openshift-storage.md",slug:"/openshift-storage",permalink:"/dsri-documentation/docs/openshift-storage",editUrl:"https://github.com/MaastrichtU-IDS/dsri-documentation/edit/master/website/docs/openshift-storage.md",version:"current",lastUpdatedBy:"Vincent Emonet",lastUpdatedAt:1607077276,sidebar:"docs",previous:{title:"Command Line Interface",permalink:"/dsri-documentation/docs/openshift-commands"},next:{title:"Prepare your project",permalink:"/dsri-documentation/docs/prepare-project-for-dsri"}},c=[{value:"OpenShift images restrictions",id:"openshift-images-restrictions",children:[{value:"OpenShift optimized images",id:"openshift-optimized-images",children:[]},{value:"Regular Docker images",id:"regular-docker-images",children:[]}]},{value:"Storage solutions",id:"storage-solutions",children:[{value:"Use the default ephemeral storage",id:"use-the-default-ephemeral-storage",children:[]},{value:"Define a dynamic persistent volume",id:"define-a-dynamic-persistent-volume",children:[]},{value:"Request a static persistent volumes",id:"request-a-static-persistent-volumes",children:[]}]}],l={rightToc:c};function p(e){var t=e.components,r=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},l,r,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"openshift-images-restrictions"},"OpenShift images restrictions"),Object(o.b)("p",null,"OpenShift prevent running regular Docker images by default, and enforce to run images as a restricted user."),Object(o.b)("h3",{id:"openshift-optimized-images"},"OpenShift optimized images"),Object(o.b)("p",null,"Some Docker images has been optimized to run in OpenShift, those images can use the ",Object(o.b)("strong",{parentName:"p"},"Dynamic storage")," feature, and automatically store persistent data."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"To run a regular Docker image, see below.")),Object(o.b)("h3",{id:"regular-docker-images"},"Regular Docker images"),Object(o.b)("p",null,"Most Docker images run with a specific user (e.g. the ",Object(o.b)("inlineCode",{parentName:"p"},"root")," user) and have not been optimized to comply with OpenShift requirements. In this case your project will need to be enable to run root containers (aka. anyuid) by the DSRI support team."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"\ud83d\udeab ",Object(o.b)("strong",{parentName:"p"},"Dynamic storage")," does not work with regular Docker images, you will need to request a ",Object(o.b)("strong",{parentName:"p"},"Persistent storage")," to securely store your data.")),Object(o.b)("h2",{id:"storage-solutions"},"Storage solutions"),Object(o.b)("p",null,"Different storages can be used when running services on the DSRI:"),Object(o.b)("p",null,"\ud83e\udd8b ",Object(o.b)("strong",{parentName:"p"},"Ephemeral storage"),": storage is bound to the pod, data will be lost when the pod is deleted (but this deployment does not require to request the creation of a persistent storage, and is faster to test code)."),Object(o.b)("p",null,"\u26a1 ",Object(o.b)("strong",{parentName:"p"},"Dynamic storage"),":  automatically create a persistent storage when starting an application. Can also be created in the OpenShift web UI, using the ",Object(o.b)("inlineCode",{parentName:"p"},"dynamic-maprfs")," Storage Class (not working with container running as root, use Jupyter S2I deployments with this storage)"),Object(o.b)("p",null,"\ud83d\uddc4\ufe0f ",Object(o.b)("strong",{parentName:"p"},"Persistent storage"),":  a persistent storage can be created by the DSRI team for a persistent storage of the data. ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/dsri-documentation/help"}),"Contact the DSRI team")," to request a persistent storage. "),Object(o.b)("h3",{id:"use-the-default-ephemeral-storage"},"Use the default ephemeral storage"),Object(o.b)("p",null,"When creating a pod, OpenShift will by default use ephemeral storage. It creates a volumes bind to the pod. So the volume will be deleted."),Object(o.b)("p",null,"It is recommended to use dynamic provisioning for a more sustainable storage solution. But ephemeral storage can be sufficient for testing."),Object(o.b)("h3",{id:"define-a-dynamic-persistent-volume"},"Define a dynamic persistent volume"),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"\ud83d\udeab Not working on project with Root access enabled at the moment, request a static volume for this.")),Object(o.b)("p",null,"Dynamic persistent volumes can be created automatically by an application template, and used for application with an image optimized for OpenShift."),Object(o.b)("p",null,"Dynamic storage can also be created dynamically, go to ",Object(o.b)("strong",{parentName:"p"},"Storage")," on the left sidebar in a project:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Click ",Object(o.b)("strong",{parentName:"li"},"Create Storage")," top right of the Storage page."),Object(o.b)("li",{parentName:"ol"},"Storage class: ",Object(o.b)("strong",{parentName:"li"},"dynamic-maprfs")),Object(o.b)("li",{parentName:"ol"},"Access Mode:",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Single User (RWO)"),": only the user who created this volume can read/write to this volume."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Shared Access (RWX)"),": all users with access to the projects can read/write this volume."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Read Only (ROX)"),": all users with access to the projects can read this volume.")))),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"Dynamic PVCs are only accessible in the project they have been created.")),Object(o.b)("h3",{id:"request-a-static-persistent-volumes"},"Request a static persistent volumes"),Object(o.b)("p",null,"Static persistent volumes provides a more sustainable storage over time for application that need to run regular Docker images."),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/dsri-documentation/help"}),"Contact the DSRI support team \ud83d\udcec")," to request a static persistent volume"))}p.isMDXComponent=!0}}]);